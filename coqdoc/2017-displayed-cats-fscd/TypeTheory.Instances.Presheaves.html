---
layout: default
title: TypeTheory.Instances.Presheaves
---

{% raw %}
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<title>TypeTheory.Instances.Presheaves</title>
</head>

<body>

<div id="page">

<div id="header">
</div>

<div id="main">

<h1 class="libtitle">Library TypeTheory.Instances.Presheaves</h1>

<div class="code">
</div>

<div class="doc">

<div class="paragraph"> </div>

This files proves that presheaves on a category C (contravariant
functors into HSET) forms a type category (<span class="inlinecode"><a class="idref" href="TypeTheory.Instances.Presheaves.html#PreShv_TypeCat"><span class="id" title="definition">PreShv_TypeCat</span></a></span>). As the
collection of types in context Γ don't form an hset it is not possible
to instantiate the CwF structure, however all of the other axioms of a
CwF have been formalized.

<div class="paragraph"> </div>

Contexts, written Γ ⊢, are modelled as presheaves and substitutions
are modelled by natural transformations σ : Δ → Γ. So the identity
substitution is given by the identity natural transformation 1 : Γ → Γ
and composition of substitutions are given by composition of natural
transformations σ · δ (note that the order is diagrammatic). So we
automatically get the equations:

<div class="paragraph"> </div>

<pre>
      1 · σ = σ · 1 = σ        (σ · δ) · τ = σ · (δ · τ)
</pre>

<div class="paragraph"> </div>

Types in context Γ, usually written Γ ⊢ A and written A : Γ ⊢ in the
formalization, are defined as presheaves on the category of elements
of Γ. So A : Γ ⊢ means A : PreShv (∫ Γ).

<div class="paragraph"> </div>

Terms a of type A in context Γ, usually written Γ ⊢ a : A and written
a : Γ ⊢ A in the formalization, are defined as families of sets aρ in
Aρ for each set ρ in Γ(I) such that (aρ)f = a(ρf) for f : J → I (see
<span class="inlinecode"><a class="idref" href="TypeTheory.Instances.Presheaves.html#TermIn"><span class="id" title="definition">TermIn</span></a></span>). This is equivalent to sections s : Γ → Γ.A of the
projection map p : Γ.A → Γ (see <span class="inlinecode"><a class="idref" href="TypeTheory.Instances.Presheaves.html#TermIn_to_TermInSection"><span class="id" title="lemma">TermIn_to_TermInSection</span></a></span>,
<span class="inlinecode"><a class="idref" href="TypeTheory.Instances.Presheaves.html#TermInSection_to_TermIn"><span class="id" title="lemma">TermInSection_to_TermIn</span></a></span>).

<div class="paragraph"> </div>

The operations then defined are:

<div class="paragraph"> </div>

<pre>
              Γ ⊢ A    σ : Δ → Γ
            ---------------------- ([subst_type])
                   Δ ⊢ Aσ


             Γ ⊢ a : A    σ : Δ → Γ
           -------------------------- ([subst_term)]
                 Δ ⊢ aσ : Aσ


                    Γ ⊢ A
                 ----------- ([ctx_ext])
                   Γ ⋆ A ⊢


                    Γ ⊢ A
               ----------------- ([ctx_proj])
                 p : Γ ⋆ A → Γ


                    Γ ⊢ A
              ------------------ ([ctx_last])
                Γ ⋆ A ⊢ q : Ap


             σ : Δ → Γ   Γ ⊢ A   Δ ⊢ a : Aσ
          ----------------------------------- ([subst_pair])
                (σ,a) : Δ → Γ ⋆ A


                  σ : Δ → Γ    Δ ⊢ A
                ---------------------- ([p_gen])
                  p_gen : Δ ⋆ A → Γ


                  σ : Δ → Γ    Γ ⊢ A
             ----------------------------- ([q_gen])
               Δ ⋆ Aσ ⊢ q_gen : A(p_gen)
</pre>

<div class="paragraph"> </div>

These satisfy the following equations:

<div class="paragraph"> </div>

<pre>
                       A1 = A            ([subst_type_id])

                    (Aσ)δ = A(σδ)        ([subst_type_comp])

                       a1 = a            ([subst_term_id])

                    (aσ)δ = a(σδ)        ([subst_term_comp])

                δ · (σ,a) = (δ · σ,aδ)   ([subst_pair_subst])

                (σ,a) · p = σ            ([subst_pair_p])

                   q(σ,a) = a            ([subst_pair_q])

                    (p,q) = 1            ([subst_pair_id])

        (p_gen,q_gen) · p = p · σ        ([q_gen_mor_p])
</pre>

<div class="paragraph"> </div>

And the last square is a pullback square (<span class="inlinecode"><a class="idref" href="TypeTheory.Instances.Presheaves.html#isPullback_q_gen_mor"><span class="id" title="lemma">isPullback_q_gen_mor</span></a></span>).

<div class="paragraph"> </div>

Written by: Anders Mörtberg, 2017

<div class="paragraph"> </div>


</div>
<div class="code">
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">UniMath.MoreFoundations.All</span>.<br/>

<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">UniMath.CategoryTheory.total2_paths</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">UniMath.CategoryTheory.Categories</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">UniMath.CategoryTheory.functor_categories</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">UniMath.CategoryTheory.Adjunctions</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">UniMath.CategoryTheory.opp_precat</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">UniMath.CategoryTheory.whiskering</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">UniMath.CategoryTheory.equivalences</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">UniMath.CategoryTheory.RightKanExtension</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">UniMath.CategoryTheory.limits.graphs.limits</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">UniMath.CategoryTheory.limits.graphs.eqdiag</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">UniMath.CategoryTheory.limits.pullbacks</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">UniMath.CategoryTheory.Presheaf</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">UniMath.CategoryTheory.ElementsOp</span>.<br/>

<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="TypeTheory.Auxiliary.CategoryTheoryImports.html#"><span class="id" title="library">TypeTheory.Auxiliary.CategoryTheoryImports</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="TypeTheory.Auxiliary.Auxiliary.html#"><span class="id" title="library">TypeTheory.Auxiliary.Auxiliary</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="TypeTheory.ALV1.TypeCat.html#"><span class="id" title="library">TypeTheory.ALV1.TypeCat</span></a>.<br/>

<br/>
<span class="id" title="keyword">Local Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">cat</span>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a name="presheaves"><span class="id" title="section">presheaves</span></a>.<br/>

<br/>
<span class="id" title="keyword">Context</span> {<span class="id" title="var">C</span> : <span class="id" title="definition">precategory</span>} (<span class="id" title="var">hsC</span> : <span class="id" title="definition">has_homsets</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#C"><span class="id" title="variable">C</span></a>).<br/>

<br/>
</div>

<div class="doc">
Γ ⊢ A is interpreted as a presheaf of ∫ Γ. In Coq this is written A : Γ ⊢ 
</div>
<div class="code">
<span class="id" title="keyword">Local</span> <span class="id" title="keyword">Notation</span> "Γ ⊢" := (<span class="id" title="notation">PreShv</span> <span class="id" title="notation">(</span><span class="id" title="notation">∫</span> <span class="id" title="var">Γ</span><span class="id" title="notation">)</span>) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 50).<br/>

<br/>
<span class="id" title="keyword">Local</span> <span class="id" title="keyword">Notation</span> "'1'" := (<span class="id" title="definition">nat_trans_id</span> <span class="id" title="var">_</span>).<br/>

<br/>
</div>

<div class="doc">
The substitution functor 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a name="subst_functor"><span class="id" title="definition">subst_functor</span></a> {<span class="id" title="var">Γ</span> <span class="id" title="var">Δ</span> : <span class="id" title="notation">PreShv</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#presheaves.C"><span class="id" title="variable">C</span></a>} (σ : <a class="idref" href="TypeTheory.Instances.Presheaves.html#d44f383ce45b5283439ea630afb544d5"><span class="id" title="variable">Δ</span></a> <span class="id" title="notation">--&gt;</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a>) :<br/>
&nbsp;&nbsp;<span class="id" title="definition">functor</span> (<span class="id" title="notation">PreShv</span> <span class="id" title="notation">(</span><span class="id" title="notation">∫</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a><span class="id" title="notation">)</span>) (<span class="id" title="notation">PreShv</span> <span class="id" title="notation">(</span><span class="id" title="notation">∫</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#d44f383ce45b5283439ea630afb544d5"><span class="id" title="variable">Δ</span></a><span class="id" title="notation">)</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="var">use</span> <span class="id" title="definition">pre_composition_functor</span>.<br/>
- <span class="id" title="tactic">apply</span> <span class="id" title="lemma">has_homsets_opp</span>, <span class="id" title="lemma">has_homsets_cat_of_elems</span>, <a class="idref" href="TypeTheory.Instances.Presheaves.html#presheaves.hsC"><span class="id" title="variable">hsC</span></a>.<br/>
- <span class="id" title="tactic">apply</span> <span class="id" title="definition">functor_opp</span>, (<span class="id" title="definition">cat_of_elems_on_nat_trans</span> σ).<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
WARNING: Only use this for small C 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a name="is_left_adjoint_subst_functor"><span class="id" title="lemma">is_left_adjoint_subst_functor</span></a> {<span class="id" title="var">Γ</span> <span class="id" title="var">Δ</span> : <span class="id" title="notation">PreShv</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#presheaves.C"><span class="id" title="variable">C</span></a>} (σ : <a class="idref" href="TypeTheory.Instances.Presheaves.html#d44f383ce45b5283439ea630afb544d5"><span class="id" title="variable">Δ</span></a> <span class="id" title="notation">--&gt;</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a>) :<br/>
&nbsp;&nbsp;<span class="id" title="definition">is_left_adjoint</span> (<a class="idref" href="TypeTheory.Instances.Presheaves.html#subst_functor"><span class="id" title="definition">subst_functor</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#3122c41ebe889f745cb9bbe1c92165c3"><span class="id" title="variable">σ</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="var">use</span> (<span class="id" title="lemma">RightKanExtension_from_limits</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="lemma">LimsHSET</span>). <span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
The right adjoint to substitution 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a name="31bf0b12546409e15021243132fc7574"><span class="id" title="definition">π</span></a> {<span class="id" title="var">Γ</span> <span class="id" title="var">Δ</span> : <span class="id" title="notation">PreShv</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#presheaves.C"><span class="id" title="variable">C</span></a>} (σ : <a class="idref" href="TypeTheory.Instances.Presheaves.html#d44f383ce45b5283439ea630afb544d5"><span class="id" title="variable">Δ</span></a> <span class="id" title="notation">--&gt;</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a>) :=<br/>
&nbsp;&nbsp;<span class="id" title="definition">right_adjoint</span> (<a class="idref" href="TypeTheory.Instances.Presheaves.html#is_left_adjoint_subst_functor"><span class="id" title="lemma">is_left_adjoint_subst_functor</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#3122c41ebe889f745cb9bbe1c92165c3"><span class="id" title="variable">σ</span></a>).<br/>

<br/>

<br/>
</div>

<div class="doc">
Given Γ ⊢ A and a substitution σ : Δ → Γ we get Δ ⊢ Aσ 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a name="subst_type"><span class="id" title="definition">subst_type</span></a> {<span class="id" title="var">Γ</span> <span class="id" title="var">Δ</span> : <span class="id" title="notation">PreShv</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#presheaves.C"><span class="id" title="variable">C</span></a>} (<span class="id" title="var">A</span> : <a class="idref" href="TypeTheory.Instances.Presheaves.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#7a56e58de4b5f0fb5c228a53fb925404"><span class="id" title="notation">⊢</span></a>) (σ : <a class="idref" href="TypeTheory.Instances.Presheaves.html#d44f383ce45b5283439ea630afb544d5"><span class="id" title="variable">Δ</span></a> <span class="id" title="notation">--&gt;</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a>) : <a class="idref" href="TypeTheory.Instances.Presheaves.html#d44f383ce45b5283439ea630afb544d5"><span class="id" title="variable">Δ</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#7a56e58de4b5f0fb5c228a53fb925404"><span class="id" title="notation">⊢</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="TypeTheory.Instances.Presheaves.html#subst_functor"><span class="id" title="definition">subst_functor</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#3122c41ebe889f745cb9bbe1c92165c3"><span class="id" title="variable">σ</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#A"><span class="id" title="variable">A</span></a>.<br/>

<br/>
<span class="id" title="keyword">Local</span> <span class="id" title="keyword">Notation</span> "A ⦃ s ⦄" := (<a class="idref" href="TypeTheory.Instances.Presheaves.html#subst_type"><span class="id" title="definition">subst_type</span></a> <span class="id" title="var">A</span> <span class="id" title="var">s</span>) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 40, <span class="id" title="var">format</span> "A ⦃ s ⦄").<br/>

<br/>
</div>

<div class="doc">
A1 = A 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a name="subst_type_id"><span class="id" title="lemma">subst_type_id</span></a> {<span class="id" title="var">Γ</span> : <span class="id" title="notation">PreShv</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#presheaves.C"><span class="id" title="variable">C</span></a>} (<span class="id" title="var">A</span> : <a class="idref" href="TypeTheory.Instances.Presheaves.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#7a56e58de4b5f0fb5c228a53fb925404"><span class="id" title="notation">⊢</span></a>) : <a class="idref" href="TypeTheory.Instances.Presheaves.html#A"><span class="id" title="variable">A</span></a><a class="idref" href="TypeTheory.Instances.Presheaves.html#d6195e35b0ff1ca2b0aa4c6f39013ba9"><span class="id" title="notation">⦃</span></a>1<a class="idref" href="TypeTheory.Instances.Presheaves.html#d6195e35b0ff1ca2b0aa4c6f39013ba9"><span class="id" title="notation">⦄</span></a> <span class="id" title="notation">=</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#A"><span class="id" title="variable">A</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">apply</span> (<span class="id" title="lemma">functor_eq</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="lemma">has_homsets_HSET</span>).<br/>
<span class="id" title="var">use</span> <span class="id" title="lemma">functor_data_eq</span>.<br/>
- <span class="id" title="tactic">intros</span> <span class="id" title="var">c</span>; <span class="id" title="tactic">apply</span> <span class="id" title="abbreviation">idpath</span>.<br/>
- <span class="id" title="tactic">intros</span> [<span class="id" title="var">a1</span> <span class="id" title="var">a2</span>] [<span class="id" title="var">b1</span> <span class="id" title="var">b2</span>] <span class="id" title="var">f</span>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <span class="id" title="definition">maponpaths</span>, <span class="id" title="lemma">subtypeEquality</span>; [<span class="id" title="tactic">intros</span> <span class="id" title="var">x</span>; <span class="id" title="tactic">apply</span> <span class="id" title="definition">setproperty</span>|].<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="base_paths_subst_type_id"><span class="id" title="lemma">base_paths_subst_type_id</span></a> {<span class="id" title="var">Γ</span> : <span class="id" title="notation">PreShv</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#presheaves.C"><span class="id" title="variable">C</span></a>} (<span class="id" title="var">A</span> : <a class="idref" href="TypeTheory.Instances.Presheaves.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#7a56e58de4b5f0fb5c228a53fb925404"><span class="id" title="notation">⊢</span></a>) :<br/>
&nbsp;&nbsp;<span class="id" title="lemma">base_paths</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="lemma">base_paths</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<a class="idref" href="TypeTheory.Instances.Presheaves.html#subst_type_id"><span class="id" title="lemma">subst_type_id</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#A"><span class="id" title="variable">A</span></a>)) <span class="id" title="notation">=</span><br/>
&nbsp;&nbsp;<span class="id" title="definition">funextsec</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="notation">λ</span> <span class="id" title="var">c</span><span class="id" title="notation">,</span> <span class="id" title="abbreviation">idpath</span> <span class="id" title="var">_</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">unfold</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#subst_type_id"><span class="id" title="lemma">subst_type_id</span></a>, <span class="id" title="lemma">functor_eq</span>, <span class="id" title="lemma">functor_data_eq</span>.<br/>
<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> !<span class="id" title="lemma">base_total2_paths</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
A(σ1 σ2) = (A σ2) σ1 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a name="subst_type_comp"><span class="id" title="lemma">subst_type_comp</span></a> {<span class="id" title="var">Γ</span> <span class="id" title="var">Δ</span> <span class="id" title="var">Θ</span> : <span class="id" title="notation">PreShv</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#presheaves.C"><span class="id" title="variable">C</span></a>} (σ1 : <a class="idref" href="TypeTheory.Instances.Presheaves.html#6e339d25b4e8063149b40e48a727392c"><span class="id" title="variable">Θ</span></a> <span class="id" title="notation">--&gt;</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#d44f383ce45b5283439ea630afb544d5"><span class="id" title="variable">Δ</span></a>) (σ2 : <a class="idref" href="TypeTheory.Instances.Presheaves.html#d44f383ce45b5283439ea630afb544d5"><span class="id" title="variable">Δ</span></a> <span class="id" title="notation">--&gt;</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a>) (<span class="id" title="var">A</span> : <a class="idref" href="TypeTheory.Instances.Presheaves.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#7a56e58de4b5f0fb5c228a53fb925404"><span class="id" title="notation">⊢</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="TypeTheory.Instances.Presheaves.html#A"><span class="id" title="variable">A</span></a><a class="idref" href="TypeTheory.Instances.Presheaves.html#d6195e35b0ff1ca2b0aa4c6f39013ba9"><span class="id" title="notation">⦃</span></a><a class="idref" href="TypeTheory.Instances.Presheaves.html#1cc6be414ab52727f77057b4b030dde0"><span class="id" title="variable">σ1</span></a> <span class="id" title="notation">·</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#a4d9266a5be6c0504292c8910a50c288"><span class="id" title="variable">σ2</span></a><a class="idref" href="TypeTheory.Instances.Presheaves.html#d6195e35b0ff1ca2b0aa4c6f39013ba9"><span class="id" title="notation">⦄</span></a> <span class="id" title="notation">=</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#A"><span class="id" title="variable">A</span></a><a class="idref" href="TypeTheory.Instances.Presheaves.html#d6195e35b0ff1ca2b0aa4c6f39013ba9"><span class="id" title="notation">⦃</span></a><a class="idref" href="TypeTheory.Instances.Presheaves.html#a4d9266a5be6c0504292c8910a50c288"><span class="id" title="variable">σ2</span></a><a class="idref" href="TypeTheory.Instances.Presheaves.html#d6195e35b0ff1ca2b0aa4c6f39013ba9"><span class="id" title="notation">⦄⦃</span></a><a class="idref" href="TypeTheory.Instances.Presheaves.html#1cc6be414ab52727f77057b4b030dde0"><span class="id" title="variable">σ1</span></a><a class="idref" href="TypeTheory.Instances.Presheaves.html#d6195e35b0ff1ca2b0aa4c6f39013ba9"><span class="id" title="notation">⦄</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">apply</span> (<span class="id" title="lemma">functor_eq</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="lemma">has_homsets_HSET</span>).<br/>
<span class="id" title="var">use</span> <span class="id" title="lemma">functor_data_eq</span>.<br/>
- <span class="id" title="tactic">intros</span> <span class="id" title="var">c</span>; <span class="id" title="tactic">apply</span> <span class="id" title="abbreviation">idpath</span>.<br/>
- <span class="id" title="tactic">intros</span> [<span class="id" title="var">a1</span> <span class="id" title="var">a2</span>] [<span class="id" title="var">b1</span> <span class="id" title="var">b2</span>] <span class="id" title="var">f</span>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <span class="id" title="definition">maponpaths</span>, <span class="id" title="lemma">subtypeEquality</span>; [<span class="id" title="tactic">intros</span> <span class="id" title="var">x</span>; <span class="id" title="tactic">apply</span> <span class="id" title="definition">setproperty</span>|].<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="base_paths_subst_type_comp"><span class="id" title="lemma">base_paths_subst_type_comp</span></a> {<span class="id" title="var">Γ</span> <span class="id" title="var">Δ</span> <span class="id" title="var">Θ</span> : <span class="id" title="notation">PreShv</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#presheaves.C"><span class="id" title="variable">C</span></a>}<br/>
&nbsp;&nbsp;(σ1 : <a class="idref" href="TypeTheory.Instances.Presheaves.html#6e339d25b4e8063149b40e48a727392c"><span class="id" title="variable">Θ</span></a> <span class="id" title="notation">--&gt;</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#d44f383ce45b5283439ea630afb544d5"><span class="id" title="variable">Δ</span></a>) (σ2 : <a class="idref" href="TypeTheory.Instances.Presheaves.html#d44f383ce45b5283439ea630afb544d5"><span class="id" title="variable">Δ</span></a> <span class="id" title="notation">--&gt;</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a>) (<span class="id" title="var">A</span> : <a class="idref" href="TypeTheory.Instances.Presheaves.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#7a56e58de4b5f0fb5c228a53fb925404"><span class="id" title="notation">⊢</span></a>) :<br/>
&nbsp;&nbsp;<span class="id" title="lemma">base_paths</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="lemma">base_paths</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<a class="idref" href="TypeTheory.Instances.Presheaves.html#subst_type_comp"><span class="id" title="lemma">subst_type_comp</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#1cc6be414ab52727f77057b4b030dde0"><span class="id" title="variable">σ1</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#a4d9266a5be6c0504292c8910a50c288"><span class="id" title="variable">σ2</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#A"><span class="id" title="variable">A</span></a>)) <span class="id" title="notation">=</span><br/>
&nbsp;&nbsp;<span class="id" title="definition">funextsec</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="notation">λ</span> <span class="id" title="var">c</span><span class="id" title="notation">,</span> <span class="id" title="abbreviation">idpath</span> <span class="id" title="var">_</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">unfold</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#subst_type_comp"><span class="id" title="lemma">subst_type_comp</span></a>, <span class="id" title="lemma">functor_eq</span>, <span class="id" title="lemma">functor_data_eq</span>.<br/>
<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> !<span class="id" title="lemma">base_total2_paths</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Direct definition of terms: Γ ⊢ a : A 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a name="TermIn"><span class="id" title="definition">TermIn</span></a> {<span class="id" title="var">Γ</span> : <span class="id" title="notation">PreShv</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#presheaves.C"><span class="id" title="variable">C</span></a>} (<span class="id" title="var">A</span> : <a class="idref" href="TypeTheory.Instances.Presheaves.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#7a56e58de4b5f0fb5c228a53fb925404"><span class="id" title="notation">⊢</span></a>) : <span class="id" title="definition">UU</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="var">use</span> <span class="id" title="record">total2</span>.<br/>
- <span class="id" title="tactic">apply</span> (<span class="id" title="notation">∏</span> <span class="id" title="notation">(</span><span class="id" title="var">I</span> : <a class="idref" href="TypeTheory.Instances.Presheaves.html#presheaves.C"><span class="id" title="variable">C</span></a>) (ρ : <span class="id" title="projection">pr1</span> (<span class="id" title="projection">pr1</span> <span class="id" title="var">Γ</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#I"><span class="id" title="variable">I</span></a>)<span class="id" title="notation">),</span> <span class="id" title="projection">pr1</span> (<span class="id" title="projection">pr1</span> <span class="id" title="var">A</span> (<span class="id" title="definition">make_ob</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#I"><span class="id" title="variable">I</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#1af91fb19f8f622aa9ec8998986a6bf9"><span class="id" title="variable">ρ</span></a>))).<br/>
- <span class="id" title="tactic">intros</span> <span class="id" title="var">a</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="notation">∏</span> <span class="id" title="notation">(</span><span class="id" title="var">I</span> <span class="id" title="var">J</span> : <a class="idref" href="TypeTheory.Instances.Presheaves.html#presheaves.C"><span class="id" title="variable">C</span></a>) (<span class="id" title="var">f</span> : <a class="idref" href="TypeTheory.Instances.Presheaves.html#J"><span class="id" title="variable">J</span></a> <span class="id" title="notation">--&gt;</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#I"><span class="id" title="variable">I</span></a>) (ρ : <span class="id" title="projection">pr1</span> (<span class="id" title="projection">pr1</span> <span class="id" title="var">Γ</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#I"><span class="id" title="variable">I</span></a>)<span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">#</span> <span class="id" title="notation">(</span><span class="id" title="projection">pr1</span> <span class="id" title="var">A</span><span class="id" title="notation">)</span> (<span class="id" title="definition">mor_to_el_mor</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#1af91fb19f8f622aa9ec8998986a6bf9"><span class="id" title="variable">ρ</span></a>) (<span class="id" title="var">a</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#I"><span class="id" title="variable">I</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#1af91fb19f8f622aa9ec8998986a6bf9"><span class="id" title="variable">ρ</span></a>) <span class="id" title="notation">=</span> <span class="id" title="var">a</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#J"><span class="id" title="variable">J</span></a> (<span class="id" title="notation">#</span> <span class="id" title="notation">(</span><span class="id" title="projection">pr1</span> <span class="id" title="var">Γ</span><span class="id" title="notation">)</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#1af91fb19f8f622aa9ec8998986a6bf9"><span class="id" title="variable">ρ</span></a>)).<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Local</span> <span class="id" title="keyword">Notation</span> "Γ ⊢ A" := (@<a class="idref" href="TypeTheory.Instances.Presheaves.html#TermIn"><span class="id" title="definition">TermIn</span></a> <span class="id" title="var">Γ</span> <span class="id" title="var">A</span>) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 50).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="mkTermIn"><span class="id" title="definition">mkTermIn</span></a> {<span class="id" title="var">Γ</span> : <span class="id" title="notation">PreShv</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#presheaves.C"><span class="id" title="variable">C</span></a>} (<span class="id" title="var">A</span> : <a class="idref" href="TypeTheory.Instances.Presheaves.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#7a56e58de4b5f0fb5c228a53fb925404"><span class="id" title="notation">⊢</span></a>)<br/>
&nbsp;&nbsp;(<span class="id" title="var">u</span> : <span class="id" title="notation">∏</span> <span class="id" title="notation">(</span><span class="id" title="var">I</span> : <a class="idref" href="TypeTheory.Instances.Presheaves.html#presheaves.C"><span class="id" title="variable">C</span></a>) (ρ : <span class="id" title="projection">pr1</span> ((<span class="id" title="projection">pr1</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a>) <a class="idref" href="TypeTheory.Instances.Presheaves.html#I"><span class="id" title="variable">I</span></a>)<span class="id" title="notation">),</span> <span class="id" title="projection">pr1</span> ((<span class="id" title="projection">pr1</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#A"><span class="id" title="variable">A</span></a>) (<span class="id" title="definition">make_ob</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#I"><span class="id" title="variable">I</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#1af91fb19f8f622aa9ec8998986a6bf9"><span class="id" title="variable">ρ</span></a>)))<br/>
&nbsp;&nbsp;(<span class="id" title="var">Hu</span> : <span class="id" title="notation">∏</span> <span class="id" title="var">I</span> <span class="id" title="var">J</span> (<span class="id" title="var">f</span> : <a class="idref" href="TypeTheory.Instances.Presheaves.html#presheaves.C"><span class="id" title="variable">C</span></a> <span class="id" title="notation">⟦</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#J"><span class="id" title="variable">J</span></a><span class="id" title="notation">,</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#I"><span class="id" title="variable">I</span></a> <span class="id" title="notation">⟧</span>) (ρ : <span class="id" title="projection">pr1</span> ((<span class="id" title="projection">pr1</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a>) <a class="idref" href="TypeTheory.Instances.Presheaves.html#I"><span class="id" title="variable">I</span></a>)<span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">#</span> <span class="id" title="notation">(</span><span class="id" title="projection">pr1</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#A"><span class="id" title="variable">A</span></a><span class="id" title="notation">)</span> (<span class="id" title="definition">mor_to_el_mor</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#1af91fb19f8f622aa9ec8998986a6bf9"><span class="id" title="variable">ρ</span></a>) (<a class="idref" href="TypeTheory.Instances.Presheaves.html#u"><span class="id" title="variable">u</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#I"><span class="id" title="variable">I</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#1af91fb19f8f622aa9ec8998986a6bf9"><span class="id" title="variable">ρ</span></a>) <span class="id" title="notation">=</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#u"><span class="id" title="variable">u</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#J"><span class="id" title="variable">J</span></a> (<span class="id" title="notation">#</span> <span class="id" title="notation">(</span><span class="id" title="projection">pr1</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a><span class="id" title="notation">)</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#1af91fb19f8f622aa9ec8998986a6bf9"><span class="id" title="variable">ρ</span></a>)) : <a class="idref" href="TypeTheory.Instances.Presheaves.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#3323350bec9275f43096d779e7c0521a"><span class="id" title="notation">⊢</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#A"><span class="id" title="variable">A</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="var">mkpair</span>.<br/>
- <span class="id" title="tactic">exact</span> <span class="id" title="var">u</span>.<br/>
- <span class="id" title="tactic">abstract</span> (<span class="id" title="tactic">exact</span> <span class="id" title="var">Hu</span>).<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="TermIn_eq"><span class="id" title="lemma">TermIn_eq</span></a> {<span class="id" title="var">Γ</span> : <span class="id" title="notation">PreShv</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#presheaves.C"><span class="id" title="variable">C</span></a>} {<span class="id" title="var">A</span> : <a class="idref" href="TypeTheory.Instances.Presheaves.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#7a56e58de4b5f0fb5c228a53fb925404"><span class="id" title="notation">⊢</span></a>} (<span class="id" title="var">a</span> <span class="id" title="var">b</span> : <a class="idref" href="TypeTheory.Instances.Presheaves.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#3323350bec9275f43096d779e7c0521a"><span class="id" title="notation">⊢</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#A"><span class="id" title="variable">A</span></a>) (<span class="id" title="var">H</span> : <span class="id" title="projection">pr1</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#a"><span class="id" title="variable">a</span></a> <span class="id" title="notation">=</span> <span class="id" title="projection">pr1</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#b"><span class="id" title="variable">b</span></a>) : <a class="idref" href="TypeTheory.Instances.Presheaves.html#a"><span class="id" title="variable">a</span></a> <span class="id" title="notation">=</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#b"><span class="id" title="variable">b</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">apply</span> <span class="id" title="lemma">subtypeEquality</span>; <span class="id" title="tactic">trivial</span>.<br/>
<span class="id" title="var">now</span> <span class="id" title="tactic">intros</span> <span class="id" title="var">x</span>; <span class="id" title="tactic">repeat</span> (<span class="id" title="tactic">apply</span> <span class="id" title="lemma">impred</span>; <span class="id" title="tactic">intros</span>); <span class="id" title="tactic">apply</span> <span class="id" title="definition">setproperty</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Context extension: given a context Γ and a type Γ ⊢ A define Γ.A 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a name="ctx_ext"><span class="id" title="definition">ctx_ext</span></a> {<span class="id" title="var">Γ</span> : <span class="id" title="notation">PreShv</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#presheaves.C"><span class="id" title="variable">C</span></a>} (<span class="id" title="var">A</span> : <a class="idref" href="TypeTheory.Instances.Presheaves.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#7a56e58de4b5f0fb5c228a53fb925404"><span class="id" title="notation">⊢</span></a>) : <span class="id" title="notation">PreShv</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#presheaves.C"><span class="id" title="variable">C</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="var">use</span> <span class="id" title="definition">mk_functor</span>.<br/>
- <span class="id" title="var">mkpair</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">I</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">use</span> <span class="id" title="definition">total2_hSet</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">apply</span> (<span class="id" title="projection">pr1</span> <span class="id" title="var">Γ</span> <span class="id" title="var">I</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">intros</span> ρ.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="projection">pr1</span> <span class="id" title="var">A</span> (<span class="id" title="definition">make_ob</span> <span class="id" title="var">I</span> ρ)).<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">intros</span> <span class="id" title="var">I</span> <span class="id" title="var">J</span> <span class="id" title="var">f</span> ρ<span class="id" title="var">u</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<span class="id" title="notation">#</span> <span class="id" title="notation">(</span><span class="id" title="projection">pr1</span> <span class="id" title="var">Γ</span><span class="id" title="notation">)</span> <span class="id" title="var">f</span> (<span class="id" title="projection">pr1</span> ρ<span class="id" title="var">u</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="notation">#</span> <span class="id" title="notation">(</span><span class="id" title="projection">pr1</span> <span class="id" title="var">A</span><span class="id" title="notation">)</span> (<span class="id" title="definition">mor_to_el_mor</span> <span class="id" title="var">f</span> (<span class="id" title="projection">pr1</span> ρ<span class="id" title="var">u</span>)) (<span class="id" title="projection">pr2</span> ρ<span class="id" title="var">u</span>)).<br/>
- <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">intros</span> <span class="id" title="var">I</span>; <span class="id" title="tactic">apply</span> <span class="id" title="definition">funextfun</span>; <span class="id" title="tactic">intros</span> [ρ <span class="id" title="var">u</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">use</span> <span class="id" title="lemma">total2_paths_f</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">exact</span> (<span class="id" title="definition">eqtohomot</span> (<span class="id" title="definition">functor_id</span> <span class="id" title="var">Γ</span> <span class="id" title="var">I</span>) ρ).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="var">etrans</span>; [<span class="id" title="var">use</span> <span class="id" title="lemma">transportf_make_ob</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">etrans</span>; [<span class="id" title="tactic">apply</span> <span class="id" title="lemma">transportf_PreShv</span>|]; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> (<span class="id" title="lemma">mor_to_el_mor_id</span> ρ), <span class="id" title="definition">transportfbinv</span>, (<span class="id" title="definition">functor_id</span> <span class="id" title="var">A</span>).<br/>
&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">intros</span> <span class="id" title="var">I</span> <span class="id" title="var">J</span> <span class="id" title="var">K</span> <span class="id" title="var">f</span> <span class="id" title="var">g</span>; <span class="id" title="tactic">apply</span> <span class="id" title="definition">funextfun</span>; <span class="id" title="tactic">intros</span> [ρ <span class="id" title="var">u</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">use</span> <span class="id" title="lemma">total2_paths_f</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">exact</span> (<span class="id" title="definition">eqtohomot</span> (<span class="id" title="definition">functor_comp</span> <span class="id" title="var">Γ</span> <span class="id" title="var">f</span> <span class="id" title="var">g</span>) ρ).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="var">etrans</span>; [<span class="id" title="var">use</span> <span class="id" title="lemma">transportf_make_ob</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">etrans</span>; [<span class="id" title="tactic">apply</span> <span class="id" title="lemma">transportf_PreShv</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="lemma">mor_to_el_mor_comp</span> <span class="id" title="var">_</span> <span class="id" title="var">f</span> <span class="id" title="var">g</span>), <span class="id" title="definition">transportfbinv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> <span class="id" title="var">u</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="keyword">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="definition">eqtohomot</span>, (<span class="id" title="definition">functor_comp</span> <span class="id" title="var">A</span> (<span class="id" title="definition">mor_to_el_mor</span> <span class="id" title="var">f</span> ρ)  (<span class="id" title="definition">mor_to_el_mor</span> <span class="id" title="var">g</span> (<span class="id" title="notation">#</span> <span class="id" title="notation">(</span><span class="id" title="projection">pr1</span> <span class="id" title="var">Γ</span><span class="id" title="notation">)</span> <span class="id" title="var">f</span> ρ))).<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Local</span> <span class="id" title="keyword">Notation</span> "Γ ⋆ A" := (@<a class="idref" href="TypeTheory.Instances.Presheaves.html#ctx_ext"><span class="id" title="definition">ctx_ext</span></a> <span class="id" title="var">Γ</span> <span class="id" title="var">A</span>) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 30).<br/>

<br/>
</div>

<div class="doc">
Context projection 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a name="ctx_proj"><span class="id" title="definition">ctx_proj</span></a> {<span class="id" title="var">Γ</span> : <span class="id" title="notation">PreShv</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#presheaves.C"><span class="id" title="variable">C</span></a>} {<span class="id" title="var">A</span> : <a class="idref" href="TypeTheory.Instances.Presheaves.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#7a56e58de4b5f0fb5c228a53fb925404"><span class="id" title="notation">⊢</span></a>} : <a class="idref" href="TypeTheory.Instances.Presheaves.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#48605e99859816f6f7d4626269cf231b"><span class="id" title="notation">⋆</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#A"><span class="id" title="variable">A</span></a> <span class="id" title="notation">--&gt;</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="var">use</span> <span class="id" title="definition">mk_nat_trans</span>.<br/>
- <span class="id" title="tactic">intros</span> <span class="id" title="var">I</span> <span class="id" title="var">X</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="projection">pr1</span> <span class="id" title="var">X</span>).<br/>
- <span class="id" title="var">now</span> <span class="id" title="tactic">intros</span> <span class="id" title="var">I</span> <span class="id" title="var">J</span> <span class="id" title="var">f</span>; <span class="id" title="tactic">apply</span> <span class="id" title="definition">funextsec</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Let</span> <a name="presheaves.p"><span class="id" title="variable">p</span></a> {<span class="id" title="var">Γ</span> : <span class="id" title="notation">PreShv</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#presheaves.C"><span class="id" title="variable">C</span></a>} {<span class="id" title="var">A</span> : <a class="idref" href="TypeTheory.Instances.Presheaves.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#7a56e58de4b5f0fb5c228a53fb925404"><span class="id" title="notation">⊢</span></a>} := @<a class="idref" href="TypeTheory.Instances.Presheaves.html#ctx_proj"><span class="id" title="definition">ctx_proj</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#A"><span class="id" title="variable">A</span></a>.<br/>

<br/>
</div>

<div class="doc">
Note that ctx_ext and p defines one part of the equivalence:
<pre>
     PreShv(∫ Γ) ≃ PreShv(C) / Γ
</pre>
by: Γ ⊢ A  ↦  (Γ ⋆ A,p)

<div class="paragraph"> </div>

Intuition: Γ ⋆ A is over Γ by p

<div class="paragraph"> </div>


<div class="paragraph"> </div>

 The last element of the context, often referred to as q 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a name="ctx_last"><span class="id" title="definition">ctx_last</span></a> {<span class="id" title="var">Γ</span> : <span class="id" title="notation">PreShv</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#presheaves.C"><span class="id" title="variable">C</span></a>} {<span class="id" title="var">A</span> : <a class="idref" href="TypeTheory.Instances.Presheaves.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#7a56e58de4b5f0fb5c228a53fb925404"><span class="id" title="notation">⊢</span></a>} : <a class="idref" href="TypeTheory.Instances.Presheaves.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#48605e99859816f6f7d4626269cf231b"><span class="id" title="notation">⋆</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#3323350bec9275f43096d779e7c0521a"><span class="id" title="notation">⊢</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#A"><span class="id" title="variable">A</span></a><a class="idref" href="TypeTheory.Instances.Presheaves.html#d6195e35b0ff1ca2b0aa4c6f39013ba9"><span class="id" title="notation">⦃</span></a><a class="idref" href="TypeTheory.Instances.Presheaves.html#presheaves.p"><span class="id" title="variable">p</span></a><a class="idref" href="TypeTheory.Instances.Presheaves.html#d6195e35b0ff1ca2b0aa4c6f39013ba9"><span class="id" title="notation">⦄</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="var">use</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#mkTermIn"><span class="id" title="definition">mkTermIn</span></a>.<br/>
+ <span class="id" title="tactic">intros</span> <span class="id" title="var">I</span> ρ.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="projection">pr2</span> ρ).<br/>
+ <span class="id" title="tactic">intros</span> <span class="id" title="var">I</span> <span class="id" title="var">J</span> <span class="id" title="var">f</span> ρ; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">apply</span> <span class="id" title="definition">map_on_two_paths</span>; <span class="id" title="tactic">trivial</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <span class="id" title="lemma">cat_of_elems_mor_eq</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Let</span> <a name="presheaves.q"><span class="id" title="variable">q</span></a> {<span class="id" title="var">Γ</span> : <span class="id" title="notation">PreShv</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#presheaves.C"><span class="id" title="variable">C</span></a>} {<span class="id" title="var">A</span> : <a class="idref" href="TypeTheory.Instances.Presheaves.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#7a56e58de4b5f0fb5c228a53fb925404"><span class="id" title="notation">⊢</span></a>} := @<a class="idref" href="TypeTheory.Instances.Presheaves.html#ctx_last"><span class="id" title="definition">ctx_last</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#A"><span class="id" title="variable">A</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="transportf_term"><span class="id" title="lemma">transportf_term</span></a> {<span class="id" title="var">Γ</span> : <span class="id" title="notation">PreShv</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#presheaves.C"><span class="id" title="variable">C</span></a>} (<span class="id" title="var">A</span> : <a class="idref" href="TypeTheory.Instances.Presheaves.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#7a56e58de4b5f0fb5c228a53fb925404"><span class="id" title="notation">⊢</span></a>) (<span class="id" title="var">a</span> : <a class="idref" href="TypeTheory.Instances.Presheaves.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#3323350bec9275f43096d779e7c0521a"><span class="id" title="notation">⊢</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#A"><span class="id" title="variable">A</span></a>) (<span class="id" title="var">J</span> : <a class="idref" href="TypeTheory.Instances.Presheaves.html#presheaves.C"><span class="id" title="variable">C</span></a>)<br/>
&nbsp;&nbsp;(<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="projection">pr1</span> (<span class="id" title="projection">pr1</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#J"><span class="id" title="variable">J</span></a>)) (<span class="id" title="var">e</span> : <a class="idref" href="TypeTheory.Instances.Presheaves.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">=</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#y"><span class="id" title="variable">y</span></a>) :<br/>
&nbsp;&nbsp;<span class="id" title="definition">transportf</span> (<span class="id" title="notation">λ</span> <span class="id" title="var">x</span><span class="id" title="notation">,</span> <span class="id" title="projection">pr1</span> (<span class="id" title="projection">pr1</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#A"><span class="id" title="variable">A</span></a> (<span class="id" title="definition">make_ob</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#J"><span class="id" title="variable">J</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#x"><span class="id" title="variable">x</span></a>))) <a class="idref" href="TypeTheory.Instances.Presheaves.html#e"><span class="id" title="variable">e</span></a> (<span class="id" title="projection">pr1</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#J"><span class="id" title="variable">J</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#x"><span class="id" title="variable">x</span></a>) <span class="id" title="notation">=</span> <span class="id" title="projection">pr1</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#J"><span class="id" title="variable">J</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#y"><span class="id" title="variable">y</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="var">now</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">e</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="subst_term_prf"><span class="id" title="lemma">subst_term_prf</span></a> {<span class="id" title="var">Γ</span> <span class="id" title="var">Δ</span> : <span class="id" title="notation">PreShv</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#presheaves.C"><span class="id" title="variable">C</span></a>} (σ : <a class="idref" href="TypeTheory.Instances.Presheaves.html#d44f383ce45b5283439ea630afb544d5"><span class="id" title="variable">Δ</span></a> <span class="id" title="notation">--&gt;</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a>) (<span class="id" title="var">A</span> : <a class="idref" href="TypeTheory.Instances.Presheaves.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#7a56e58de4b5f0fb5c228a53fb925404"><span class="id" title="notation">⊢</span></a>) (<span class="id" title="var">a</span> : <a class="idref" href="TypeTheory.Instances.Presheaves.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#3323350bec9275f43096d779e7c0521a"><span class="id" title="notation">⊢</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#A"><span class="id" title="variable">A</span></a>)<br/>
&nbsp;&nbsp;(<span class="id" title="var">I</span> <span class="id" title="var">J</span> : <a class="idref" href="TypeTheory.Instances.Presheaves.html#presheaves.C"><span class="id" title="variable">C</span></a>) (<span class="id" title="var">f</span> : <a class="idref" href="TypeTheory.Instances.Presheaves.html#presheaves.C"><span class="id" title="variable">C</span></a> <span class="id" title="notation">⟦</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#J"><span class="id" title="variable">J</span></a><span class="id" title="notation">,</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#I"><span class="id" title="variable">I</span></a> <span class="id" title="notation">⟧</span>) (ρ : <span class="id" title="projection">pr1</span> ((<span class="id" title="projection">pr1</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#d44f383ce45b5283439ea630afb544d5"><span class="id" title="variable">Δ</span></a>) <a class="idref" href="TypeTheory.Instances.Presheaves.html#I"><span class="id" title="variable">I</span></a>)) :<br/>
&nbsp;&nbsp;<span class="id" title="notation">#</span> <span class="id" title="notation">(</span><span class="id" title="projection">pr1</span> (<a class="idref" href="TypeTheory.Instances.Presheaves.html#A"><span class="id" title="variable">A</span></a><a class="idref" href="TypeTheory.Instances.Presheaves.html#d6195e35b0ff1ca2b0aa4c6f39013ba9"><span class="id" title="notation">⦃</span></a><a class="idref" href="TypeTheory.Instances.Presheaves.html#3122c41ebe889f745cb9bbe1c92165c3"><span class="id" title="variable">σ</span></a><a class="idref" href="TypeTheory.Instances.Presheaves.html#d6195e35b0ff1ca2b0aa4c6f39013ba9"><span class="id" title="notation">⦄</span></a>)<span class="id" title="notation">)</span> (<span class="id" title="definition">mor_to_el_mor</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#1af91fb19f8f622aa9ec8998986a6bf9"><span class="id" title="variable">ρ</span></a>) (<span class="id" title="projection">pr1</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#I"><span class="id" title="variable">I</span></a> (<span class="id" title="projection">pr1</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#3122c41ebe889f745cb9bbe1c92165c3"><span class="id" title="variable">σ</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#I"><span class="id" title="variable">I</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#1af91fb19f8f622aa9ec8998986a6bf9"><span class="id" title="variable">ρ</span></a>)) <span class="id" title="notation">=</span><br/>
&nbsp;&nbsp;<span class="id" title="projection">pr1</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#J"><span class="id" title="variable">J</span></a> (<span class="id" title="projection">pr1</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#3122c41ebe889f745cb9bbe1c92165c3"><span class="id" title="variable">σ</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#J"><span class="id" title="variable">J</span></a> (<span class="id" title="notation">#</span> <span class="id" title="notation">(</span><span class="id" title="projection">pr1</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#d44f383ce45b5283439ea630afb544d5"><span class="id" title="variable">Δ</span></a><span class="id" title="notation">)</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#1af91fb19f8f622aa9ec8998986a6bf9"><span class="id" title="variable">ρ</span></a>)).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">set</span> (<span class="id" title="var">eq</span> := <span class="id" title="definition">eqtohomot</span> (<span class="id" title="definition">nat_trans_ax</span> σ <span class="id" title="var">I</span> <span class="id" title="var">J</span> <span class="id" title="var">f</span>) ρ).<br/>
<span class="id" title="tactic">set</span> (<span class="id" title="var">x</span> := <span class="id" title="notation">#</span> <span class="id" title="notation">(</span><span class="id" title="projection">pr1</span> <span class="id" title="var">A</span><span class="id" title="notation">)</span> (<span class="id" title="definition">mor_to_el_mor</span> <span class="id" title="var">f</span> (<span class="id" title="projection">pr1</span> σ <span class="id" title="var">I</span> ρ)) (<span class="id" title="projection">pr1</span> <span class="id" title="var">a</span> <span class="id" title="var">I</span> (<span class="id" title="projection">pr1</span> σ <span class="id" title="var">I</span> ρ))).<br/>
<span class="id" title="var">pathvia</span> (<span class="id" title="definition">transportb</span> (<span class="id" title="notation">λ</span> <span class="id" title="var">x</span><span class="id" title="notation">,</span> <span class="id" title="projection">pr1</span> ((<span class="id" title="projection">pr1</span> <span class="id" title="var">A</span>) (<span class="id" title="definition">make_ob</span> <span class="id" title="var">J</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#x"><span class="id" title="variable">x</span></a>))) <span class="id" title="var">eq</span> <span class="id" title="var">x</span>).<br/>
{ <span class="id" title="tactic">apply</span> <span class="id" title="definition">pathsinv0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">etrans</span>; [<span class="id" title="var">use</span> <span class="id" title="lemma">transportf_make_ob</span>|].<br/>
&nbsp;&nbsp;<span class="id" title="var">etrans</span>; [<span class="id" title="tactic">apply</span> <span class="id" title="lemma">transportf_PreShv</span>|]; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="definition">map_on_two_paths</span>; <span class="id" title="tactic">trivial</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">cat_of_elems_mor_eq</span>; <span class="id" title="var">cbn</span> <span class="id" title="keyword">in</span> *.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="definition">transportf_total2</span>; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="lemma">transportf_make_ob_eq</span> <span class="id" title="var">_</span> (<span class="id" title="definition">maponpaths</span> <span class="id" title="var">_</span> (<span class="id" title="notation">!</span><span class="id" title="var">eq</span>))).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> (<span class="id" title="lemma">base_paths_maponpaths_make_ob</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="notation">!</span><span class="id" title="var">eq</span>)); <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span>, <span class="id" title="definition">idpath_transportf</span>. }<br/>
<span class="id" title="tactic">set</span> (<span class="id" title="var">w</span> := <span class="id" title="projection">pr1</span> <span class="id" title="var">a</span> <span class="id" title="var">J</span> (<span class="id" title="notation">#</span> <span class="id" title="notation">(</span><span class="id" title="projection">pr1</span> <span class="id" title="var">Γ</span><span class="id" title="notation">)</span> <span class="id" title="var">f</span> (<span class="id" title="projection">pr1</span> σ <span class="id" title="var">I</span> ρ))).<br/>
<span class="id" title="var">pathvia</span> (<span class="id" title="definition">transportb</span> (<span class="id" title="notation">λ</span> <span class="id" title="var">x</span><span class="id" title="notation">,</span> <span class="id" title="projection">pr1</span> ((<span class="id" title="projection">pr1</span> <span class="id" title="var">A</span>) (<span class="id" title="definition">make_ob</span> <span class="id" title="var">J</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#x"><span class="id" title="variable">x</span></a>))) <span class="id" title="var">eq</span> <span class="id" title="var">w</span>).<br/>
{ <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <span class="id" title="definition">maponpaths</span>, (<span class="id" title="projection">pr2</span> <span class="id" title="var">a</span> <span class="id" title="var">I</span> <span class="id" title="var">J</span> <span class="id" title="var">f</span> (<span class="id" title="projection">pr1</span> σ <span class="id" title="var">_</span> ρ)). }<br/>
<span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#transportf_term"><span class="id" title="lemma">transportf_term</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Given Γ ⊢ a : A and a substitution σ : Δ → Γ we get Δ ⊢ aσ : Aσ 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a name="subst_term"><span class="id" title="definition">subst_term</span></a> {<span class="id" title="var">Γ</span> <span class="id" title="var">Δ</span> : <span class="id" title="notation">PreShv</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#presheaves.C"><span class="id" title="variable">C</span></a>} (σ : <a class="idref" href="TypeTheory.Instances.Presheaves.html#d44f383ce45b5283439ea630afb544d5"><span class="id" title="variable">Δ</span></a> <span class="id" title="notation">--&gt;</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a>) {<span class="id" title="var">A</span> : <a class="idref" href="TypeTheory.Instances.Presheaves.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#7a56e58de4b5f0fb5c228a53fb925404"><span class="id" title="notation">⊢</span></a>} (<span class="id" title="var">a</span> : <a class="idref" href="TypeTheory.Instances.Presheaves.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#3323350bec9275f43096d779e7c0521a"><span class="id" title="notation">⊢</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#A"><span class="id" title="variable">A</span></a>) : <a class="idref" href="TypeTheory.Instances.Presheaves.html#d44f383ce45b5283439ea630afb544d5"><span class="id" title="variable">Δ</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#3323350bec9275f43096d779e7c0521a"><span class="id" title="notation">⊢</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#A"><span class="id" title="variable">A</span></a><a class="idref" href="TypeTheory.Instances.Presheaves.html#d6195e35b0ff1ca2b0aa4c6f39013ba9"><span class="id" title="notation">⦃</span></a><a class="idref" href="TypeTheory.Instances.Presheaves.html#3122c41ebe889f745cb9bbe1c92165c3"><span class="id" title="variable">σ</span></a><a class="idref" href="TypeTheory.Instances.Presheaves.html#d6195e35b0ff1ca2b0aa4c6f39013ba9"><span class="id" title="notation">⦄</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="var">use</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#mkTermIn"><span class="id" title="definition">mkTermIn</span></a>.<br/>
- <span class="id" title="tactic">intros</span> <span class="id" title="var">I</span> ρ.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="projection">pr1</span> <span class="id" title="var">a</span> <span class="id" title="var">_</span> (<span class="id" title="projection">pr1</span> σ <span class="id" title="var">I</span> ρ)).<br/>
- <span class="id" title="tactic">apply</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#subst_term_prf"><span class="id" title="lemma">subst_term_prf</span></a>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="transportf_TypeIn"><span class="id" title="lemma">transportf_TypeIn</span></a> {<span class="id" title="var">Γ</span> : <span class="id" title="notation">PreShv</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#presheaves.C"><span class="id" title="variable">C</span></a>} (<span class="id" title="var">I</span> : <a class="idref" href="TypeTheory.Instances.Presheaves.html#presheaves.C"><span class="id" title="variable">C</span></a>) (ρ : <span class="id" title="projection">pr1</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#I"><span class="id" title="variable">I</span></a> : <span class="id" title="definition">hSet</span>) (<span class="id" title="var">A</span> <span class="id" title="var">B</span> : <a class="idref" href="TypeTheory.Instances.Presheaves.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#7a56e58de4b5f0fb5c228a53fb925404"><span class="id" title="notation">⊢</span></a>) (<span class="id" title="var">e</span> : <a class="idref" href="TypeTheory.Instances.Presheaves.html#A"><span class="id" title="variable">A</span></a> <span class="id" title="notation">=</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#B"><span class="id" title="variable">B</span></a>)<br/>
&nbsp;&nbsp;(<span class="id" title="var">x</span> : (<span class="id" title="projection">pr1</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#A"><span class="id" title="variable">A</span></a>) (<span class="id" title="definition">make_ob</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#I"><span class="id" title="variable">I</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#1af91fb19f8f622aa9ec8998986a6bf9"><span class="id" title="variable">ρ</span></a>) : <span class="id" title="definition">hSet</span>) :<br/>
&nbsp;&nbsp;<span class="id" title="definition">transportf</span> (<span class="id" title="notation">λ</span> <span class="id" title="var">x0</span> : <a class="idref" href="TypeTheory.Instances.Presheaves.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#7a56e58de4b5f0fb5c228a53fb925404"><span class="id" title="notation">⊢</span></a><span class="id" title="notation">,</span> <span class="id" title="projection">pr1</span> ((<span class="id" title="projection">pr1</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#x0"><span class="id" title="variable">x0</span></a>) (<span class="id" title="definition">make_ob</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#I"><span class="id" title="variable">I</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#1af91fb19f8f622aa9ec8998986a6bf9"><span class="id" title="variable">ρ</span></a>))) <a class="idref" href="TypeTheory.Instances.Presheaves.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">=</span><br/>
&nbsp;&nbsp;<span class="id" title="definition">transportf</span> (<span class="id" title="notation">λ</span> <span class="id" title="var">x0</span> : <span class="id" title="definition">hSet</span><span class="id" title="notation">,</span> <span class="id" title="projection">pr1</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#x0"><span class="id" title="variable">x0</span></a>) (<span class="id" title="definition">eqtohomot</span> (<span class="id" title="lemma">base_paths</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="lemma">base_paths</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#e"><span class="id" title="variable">e</span></a>)) (<span class="id" title="definition">make_ob</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#I"><span class="id" title="variable">I</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#1af91fb19f8f622aa9ec8998986a6bf9"><span class="id" title="variable">ρ</span></a>)) <a class="idref" href="TypeTheory.Instances.Presheaves.html#x"><span class="id" title="variable">x</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="var">now</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">e</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="transportf_subst_type0"><span class="id" title="lemma">transportf_subst_type0</span></a> {<span class="id" title="var">Γ</span> <span class="id" title="var">Δ</span> : <span class="id" title="notation">PreShv</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#presheaves.C"><span class="id" title="variable">C</span></a>} (σ : <a class="idref" href="TypeTheory.Instances.Presheaves.html#d44f383ce45b5283439ea630afb544d5"><span class="id" title="variable">Δ</span></a> <span class="id" title="notation">--&gt;</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a>)<br/>
&nbsp;&nbsp;{<span class="id" title="var">A</span> : <a class="idref" href="TypeTheory.Instances.Presheaves.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#7a56e58de4b5f0fb5c228a53fb925404"><span class="id" title="notation">⊢</span></a>} {<span class="id" title="var">B</span> : <a class="idref" href="TypeTheory.Instances.Presheaves.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#7a56e58de4b5f0fb5c228a53fb925404"><span class="id" title="notation">⊢</span></a>} (<span class="id" title="var">a</span> : <a class="idref" href="TypeTheory.Instances.Presheaves.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#3323350bec9275f43096d779e7c0521a"><span class="id" title="notation">⊢</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#A"><span class="id" title="variable">A</span></a>) (<span class="id" title="var">e</span> : <a class="idref" href="TypeTheory.Instances.Presheaves.html#A"><span class="id" title="variable">A</span></a> <span class="id" title="notation">=</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#B"><span class="id" title="variable">B</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">transportf</span> (<span class="id" title="notation">λ</span> <span class="id" title="var">x</span><span class="id" title="notation">,</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#d44f383ce45b5283439ea630afb544d5"><span class="id" title="variable">Δ</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#3323350bec9275f43096d779e7c0521a"><span class="id" title="notation">⊢</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#x"><span class="id" title="variable">x</span></a>) (<span class="id" title="definition">maponpaths</span> (<span class="id" title="notation">λ</span> <span class="id" title="var">x</span><span class="id" title="notation">,</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#subst_type"><span class="id" title="definition">subst_type</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#3122c41ebe889f745cb9bbe1c92165c3"><span class="id" title="variable">σ</span></a>) <a class="idref" href="TypeTheory.Instances.Presheaves.html#e"><span class="id" title="variable">e</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="TypeTheory.Instances.Presheaves.html#subst_term"><span class="id" title="definition">subst_term</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#3122c41ebe889f745cb9bbe1c92165c3"><span class="id" title="variable">σ</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#a"><span class="id" title="variable">a</span></a>) <span class="id" title="notation">=</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="TypeTheory.Instances.Presheaves.html#subst_term"><span class="id" title="definition">subst_term</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#3122c41ebe889f745cb9bbe1c92165c3"><span class="id" title="variable">σ</span></a> (<span class="id" title="definition">transportf</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#TermIn"><span class="id" title="definition">TermIn</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#a"><span class="id" title="variable">a</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="var">now</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">e</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
a1 = a 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a name="subst_term_id"><span class="id" title="lemma">subst_term_id</span></a> {<span class="id" title="var">Γ</span> : <span class="id" title="notation">PreShv</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#presheaves.C"><span class="id" title="variable">C</span></a>} {<span class="id" title="var">A</span> : <a class="idref" href="TypeTheory.Instances.Presheaves.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#7a56e58de4b5f0fb5c228a53fb925404"><span class="id" title="notation">⊢</span></a>} (<span class="id" title="var">a</span> : <a class="idref" href="TypeTheory.Instances.Presheaves.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#3323350bec9275f43096d779e7c0521a"><span class="id" title="notation">⊢</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#A"><span class="id" title="variable">A</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="TypeTheory.Instances.Presheaves.html#subst_term"><span class="id" title="definition">subst_term</span></a> 1 <a class="idref" href="TypeTheory.Instances.Presheaves.html#a"><span class="id" title="variable">a</span></a> <span class="id" title="notation">=</span> <span class="id" title="definition">transportb</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#TermIn"><span class="id" title="definition">TermIn</span></a> (<a class="idref" href="TypeTheory.Instances.Presheaves.html#subst_type_id"><span class="id" title="lemma">subst_type_id</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#A"><span class="id" title="variable">A</span></a>) <a class="idref" href="TypeTheory.Instances.Presheaves.html#a"><span class="id" title="variable">a</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">apply</span> <span class="id" title="lemma">transportf_transpose</span>, <a class="idref" href="TypeTheory.Instances.Presheaves.html#TermIn_eq"><span class="id" title="lemma">TermIn_eq</span></a>.<br/>
<span class="id" title="var">etrans</span>; [<span class="id" title="var">use</span> <a class="idref" href="TypeTheory.Auxiliary.Auxiliary.html#pr1_transportf"><span class="id" title="lemma">pr1_transportf</span></a>|].<br/>
<span class="id" title="tactic">apply</span> <span class="id" title="definition">funextsec</span>; <span class="id" title="tactic">intro</span> <span class="id" title="var">I</span>; <span class="id" title="tactic">apply</span> <span class="id" title="definition">funextsec</span>; <span class="id" title="tactic">intro</span> ρ.<br/>
<span class="id" title="tactic">rewrite</span> !<a class="idref" href="TypeTheory.Auxiliary.Auxiliary.html#transportf_forall"><span class="id" title="lemma">transportf_forall</span></a>, <a class="idref" href="TypeTheory.Instances.Presheaves.html#transportf_TypeIn"><span class="id" title="lemma">transportf_TypeIn</span></a>, <span class="id" title="definition">pathsinv0inv0</span>.<br/>
<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#base_paths_subst_type_id"><span class="id" title="lemma">base_paths_subst_type_id</span></a>, <span class="id" title="lemma">toforallpaths_funextsec</span>, <span class="id" title="definition">idpath_transportf</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
a(σ1 σ2) = (a σ2)σ1 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a name="subst_term_comp"><span class="id" title="lemma">subst_term_comp</span></a> {<span class="id" title="var">Γ</span> <span class="id" title="var">Δ</span> <span class="id" title="var">Θ</span> : <span class="id" title="notation">PreShv</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#presheaves.C"><span class="id" title="variable">C</span></a>} (σ1 : <a class="idref" href="TypeTheory.Instances.Presheaves.html#6e339d25b4e8063149b40e48a727392c"><span class="id" title="variable">Θ</span></a> <span class="id" title="notation">--&gt;</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#d44f383ce45b5283439ea630afb544d5"><span class="id" title="variable">Δ</span></a>) (σ2 : <a class="idref" href="TypeTheory.Instances.Presheaves.html#d44f383ce45b5283439ea630afb544d5"><span class="id" title="variable">Δ</span></a> <span class="id" title="notation">--&gt;</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a>) {<span class="id" title="var">A</span> : <a class="idref" href="TypeTheory.Instances.Presheaves.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#7a56e58de4b5f0fb5c228a53fb925404"><span class="id" title="notation">⊢</span></a>} (<span class="id" title="var">a</span> : <a class="idref" href="TypeTheory.Instances.Presheaves.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#3323350bec9275f43096d779e7c0521a"><span class="id" title="notation">⊢</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#A"><span class="id" title="variable">A</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="TypeTheory.Instances.Presheaves.html#subst_term"><span class="id" title="definition">subst_term</span></a> (<a class="idref" href="TypeTheory.Instances.Presheaves.html#1cc6be414ab52727f77057b4b030dde0"><span class="id" title="variable">σ1</span></a> <span class="id" title="notation">·</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#a4d9266a5be6c0504292c8910a50c288"><span class="id" title="variable">σ2</span></a>) <a class="idref" href="TypeTheory.Instances.Presheaves.html#a"><span class="id" title="variable">a</span></a> <span class="id" title="notation">=</span><br/>
&nbsp;&nbsp;<span class="id" title="definition">transportb</span> (<span class="id" title="notation">λ</span> <span class="id" title="var">x</span><span class="id" title="notation">,</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#6e339d25b4e8063149b40e48a727392c"><span class="id" title="variable">Θ</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#3323350bec9275f43096d779e7c0521a"><span class="id" title="notation">⊢</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#x"><span class="id" title="variable">x</span></a>) (<a class="idref" href="TypeTheory.Instances.Presheaves.html#subst_type_comp"><span class="id" title="lemma">subst_type_comp</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#1cc6be414ab52727f77057b4b030dde0"><span class="id" title="variable">σ1</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#a4d9266a5be6c0504292c8910a50c288"><span class="id" title="variable">σ2</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#A"><span class="id" title="variable">A</span></a>) (<a class="idref" href="TypeTheory.Instances.Presheaves.html#subst_term"><span class="id" title="definition">subst_term</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#1cc6be414ab52727f77057b4b030dde0"><span class="id" title="variable">σ1</span></a> (<a class="idref" href="TypeTheory.Instances.Presheaves.html#subst_term"><span class="id" title="definition">subst_term</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#a4d9266a5be6c0504292c8910a50c288"><span class="id" title="variable">σ2</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#a"><span class="id" title="variable">a</span></a>)).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">apply</span> <span class="id" title="lemma">transportf_transpose</span>, <a class="idref" href="TypeTheory.Instances.Presheaves.html#TermIn_eq"><span class="id" title="lemma">TermIn_eq</span></a>.<br/>
<span class="id" title="var">etrans</span>; [<span class="id" title="var">use</span> <a class="idref" href="TypeTheory.Auxiliary.Auxiliary.html#pr1_transportf"><span class="id" title="lemma">pr1_transportf</span></a>|].<br/>
<span class="id" title="tactic">apply</span> <span class="id" title="definition">funextsec</span>; <span class="id" title="tactic">intro</span> <span class="id" title="var">I</span>; <span class="id" title="tactic">apply</span> <span class="id" title="definition">funextsec</span>; <span class="id" title="tactic">intro</span> ρ.<br/>
<span class="id" title="tactic">rewrite</span> !<a class="idref" href="TypeTheory.Auxiliary.Auxiliary.html#transportf_forall"><span class="id" title="lemma">transportf_forall</span></a>, <a class="idref" href="TypeTheory.Instances.Presheaves.html#transportf_TypeIn"><span class="id" title="lemma">transportf_TypeIn</span></a>, <span class="id" title="definition">pathsinv0inv0</span>.<br/>
<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> (<a class="idref" href="TypeTheory.Instances.Presheaves.html#base_paths_subst_type_comp"><span class="id" title="lemma">base_paths_subst_type_comp</span></a> σ1 σ2 <span class="id" title="var">A</span>), <span class="id" title="lemma">toforallpaths_funextsec</span>, <span class="id" title="definition">idpath_transportf</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Pairing of substitutions 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a name="subst_pair"><span class="id" title="definition">subst_pair</span></a> {<span class="id" title="var">Γ</span> <span class="id" title="var">Δ</span> : <span class="id" title="notation">PreShv</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#presheaves.C"><span class="id" title="variable">C</span></a>} {<span class="id" title="var">A</span> : <a class="idref" href="TypeTheory.Instances.Presheaves.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#7a56e58de4b5f0fb5c228a53fb925404"><span class="id" title="notation">⊢</span></a>} (σ : <a class="idref" href="TypeTheory.Instances.Presheaves.html#d44f383ce45b5283439ea630afb544d5"><span class="id" title="variable">Δ</span></a> <span class="id" title="notation">--&gt;</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a>) (<span class="id" title="var">a</span> : <a class="idref" href="TypeTheory.Instances.Presheaves.html#d44f383ce45b5283439ea630afb544d5"><span class="id" title="variable">Δ</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#3323350bec9275f43096d779e7c0521a"><span class="id" title="notation">⊢</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#A"><span class="id" title="variable">A</span></a><a class="idref" href="TypeTheory.Instances.Presheaves.html#d6195e35b0ff1ca2b0aa4c6f39013ba9"><span class="id" title="notation">⦃</span></a><a class="idref" href="TypeTheory.Instances.Presheaves.html#3122c41ebe889f745cb9bbe1c92165c3"><span class="id" title="variable">σ</span></a><a class="idref" href="TypeTheory.Instances.Presheaves.html#d6195e35b0ff1ca2b0aa4c6f39013ba9"><span class="id" title="notation">⦄</span></a>) : <a class="idref" href="TypeTheory.Instances.Presheaves.html#d44f383ce45b5283439ea630afb544d5"><span class="id" title="variable">Δ</span></a> <span class="id" title="notation">--&gt;</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#48605e99859816f6f7d4626269cf231b"><span class="id" title="notation">⋆</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#A"><span class="id" title="variable">A</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="var">use</span> <span class="id" title="definition">mk_nat_trans</span>.<br/>
- <span class="id" title="tactic">intros</span> <span class="id" title="var">I</span> ρ.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="projection">pr1</span> σ <span class="id" title="var">_</span> ρ<span class="id" title="notation">,,</span><span class="id" title="projection">pr1</span> <span class="id" title="var">a</span> <span class="id" title="var">I</span> ρ).<br/>
- <span class="id" title="tactic">intros</span> <span class="id" title="var">I</span> <span class="id" title="var">J</span> <span class="id" title="var">f</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="definition">funextsec</span>; <span class="id" title="tactic">intro</span> ρ; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="lemma">total2_paths2_f</span> (<span class="id" title="definition">eqtohomot</span> (<span class="id" title="definition">nat_trans_ax</span> σ <span class="id" title="var">I</span> <span class="id" title="var">J</span> <span class="id" title="var">f</span>) ρ)).<br/>
&nbsp;&nbsp;<span class="id" title="var">etrans</span>; [<span class="id" title="tactic">eapply</span> <span class="id" title="definition">maponpaths</span>, (<span class="id" title="notation">!(</span><span class="id" title="projection">pr2</span> <span class="id" title="var">a</span> <span class="id" title="var">I</span> <span class="id" title="var">J</span> <span class="id" title="var">f</span> ρ<span class="id" title="notation">)</span>)|].<br/>
&nbsp;&nbsp;<span class="id" title="var">etrans</span>; [<span class="id" title="var">use</span> <span class="id" title="lemma">transportf_make_ob</span>|].<br/>
&nbsp;&nbsp;<span class="id" title="var">etrans</span>; [<span class="id" title="tactic">apply</span> (@<span class="id" title="lemma">transportf_PreShv</span> (<span class="id" title="notation">∫</span> <span class="id" title="var">Γ</span>) <span class="id" title="var">A</span>)|].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="definition">map_on_two_paths</span>; <span class="id" title="tactic">trivial</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">cat_of_elems_mor_eq</span>; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="definition">transportf_total2</span>; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">etrans</span>; [<span class="id" title="tactic">apply</span> <span class="id" title="lemma">transportf_make_ob_eq</span>|].<br/>
&nbsp;&nbsp;<span class="id" title="var">etrans</span>; [<span class="id" title="tactic">eapply</span> <span class="id" title="definition">map_on_two_paths</span>; [|<span class="id" title="tactic">apply</span> <span class="id" title="abbreviation">idpath</span>]|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span>(<span class="id" title="lemma">base_paths_maponpaths_make_ob</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="definition">eqtohomot</span> (<span class="id" title="definition">nat_trans_ax</span> σ <span class="id" title="var">I</span> <span class="id" title="var">J</span> <span class="id" title="var">f</span>) ρ)).<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="definition">idpath_transportf</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
<span class="inlinecode"><a class="idref" href="TypeTheory.Auxiliary.Auxiliary.html#on_pullbacks.a"><span class="id" title="variable">a</span></a></span> = (1,a) 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a name="subst_el"><span class="id" title="definition">subst_el</span></a> {<span class="id" title="var">Γ</span> : <span class="id" title="notation">PreShv</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#presheaves.C"><span class="id" title="variable">C</span></a>} {<span class="id" title="var">A</span> : <a class="idref" href="TypeTheory.Instances.Presheaves.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#7a56e58de4b5f0fb5c228a53fb925404"><span class="id" title="notation">⊢</span></a>}  (<span class="id" title="var">a</span> : <a class="idref" href="TypeTheory.Instances.Presheaves.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#3323350bec9275f43096d779e7c0521a"><span class="id" title="notation">⊢</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#A"><span class="id" title="variable">A</span></a><a class="idref" href="TypeTheory.Instances.Presheaves.html#d6195e35b0ff1ca2b0aa4c6f39013ba9"><span class="id" title="notation">⦃</span></a>1<a class="idref" href="TypeTheory.Instances.Presheaves.html#d6195e35b0ff1ca2b0aa4c6f39013ba9"><span class="id" title="notation">⦄</span></a>) : <a class="idref" href="TypeTheory.Instances.Presheaves.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a> <span class="id" title="notation">--&gt;</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#48605e99859816f6f7d4626269cf231b"><span class="id" title="notation">⋆</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#A"><span class="id" title="variable">A</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="TypeTheory.Instances.Presheaves.html#subst_pair"><span class="id" title="definition">subst_pair</span></a> 1 <a class="idref" href="TypeTheory.Instances.Presheaves.html#a"><span class="id" title="variable">a</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="term_to_subst"><span class="id" title="definition">term_to_subst</span></a> {<span class="id" title="var">Γ</span> : <span class="id" title="notation">PreShv</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#presheaves.C"><span class="id" title="variable">C</span></a>} (<span class="id" title="var">A</span> : <a class="idref" href="TypeTheory.Instances.Presheaves.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#7a56e58de4b5f0fb5c228a53fb925404"><span class="id" title="notation">⊢</span></a>) (<span class="id" title="var">a</span> : <a class="idref" href="TypeTheory.Instances.Presheaves.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#3323350bec9275f43096d779e7c0521a"><span class="id" title="notation">⊢</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#A"><span class="id" title="variable">A</span></a>) : <a class="idref" href="TypeTheory.Instances.Presheaves.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a> <span class="id" title="notation">--&gt;</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#48605e99859816f6f7d4626269cf231b"><span class="id" title="notation">⋆</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#A"><span class="id" title="variable">A</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">apply</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#subst_el"><span class="id" title="definition">subst_el</span></a>.<br/>
<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#subst_type_id"><span class="id" title="lemma">subst_type_id</span></a>. <span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
(σ,a) · p = σ 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a name="subst_pair_p"><span class="id" title="lemma">subst_pair_p</span></a> {<span class="id" title="var">Γ</span> <span class="id" title="var">Δ</span> : <span class="id" title="notation">PreShv</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#presheaves.C"><span class="id" title="variable">C</span></a>} (σ : <a class="idref" href="TypeTheory.Instances.Presheaves.html#d44f383ce45b5283439ea630afb544d5"><span class="id" title="variable">Δ</span></a> <span class="id" title="notation">--&gt;</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a>) {<span class="id" title="var">A</span> : <a class="idref" href="TypeTheory.Instances.Presheaves.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#7a56e58de4b5f0fb5c228a53fb925404"><span class="id" title="notation">⊢</span></a>} (<span class="id" title="var">a</span> : <a class="idref" href="TypeTheory.Instances.Presheaves.html#d44f383ce45b5283439ea630afb544d5"><span class="id" title="variable">Δ</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#3323350bec9275f43096d779e7c0521a"><span class="id" title="notation">⊢</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#A"><span class="id" title="variable">A</span></a><a class="idref" href="TypeTheory.Instances.Presheaves.html#d6195e35b0ff1ca2b0aa4c6f39013ba9"><span class="id" title="notation">⦃</span></a><a class="idref" href="TypeTheory.Instances.Presheaves.html#3122c41ebe889f745cb9bbe1c92165c3"><span class="id" title="variable">σ</span></a><a class="idref" href="TypeTheory.Instances.Presheaves.html#d6195e35b0ff1ca2b0aa4c6f39013ba9"><span class="id" title="notation">⦄</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="TypeTheory.Instances.Presheaves.html#subst_pair"><span class="id" title="definition">subst_pair</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#3122c41ebe889f745cb9bbe1c92165c3"><span class="id" title="variable">σ</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#a"><span class="id" title="variable">a</span></a> <span class="id" title="notation">·</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#presheaves.p"><span class="id" title="variable">p</span></a> <span class="id" title="notation">=</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#3122c41ebe889f745cb9bbe1c92165c3"><span class="id" title="variable">σ</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">apply</span> (<span class="id" title="lemma">nat_trans_eq</span> <span class="id" title="lemma">has_homsets_HSET</span>).<br/>
<span class="id" title="var">now</span> <span class="id" title="tactic">intros</span> <span class="id" title="var">I</span>; <span class="id" title="tactic">apply</span> <span class="id" title="definition">funextsec</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="subst_type_pair_p"><span class="id" title="lemma">subst_type_pair_p</span></a> {<span class="id" title="var">Γ</span> <span class="id" title="var">Δ</span> : <span class="id" title="notation">PreShv</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#presheaves.C"><span class="id" title="variable">C</span></a>} (σ : <a class="idref" href="TypeTheory.Instances.Presheaves.html#d44f383ce45b5283439ea630afb544d5"><span class="id" title="variable">Δ</span></a> <span class="id" title="notation">--&gt;</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a>) {<span class="id" title="var">A</span> : <a class="idref" href="TypeTheory.Instances.Presheaves.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#7a56e58de4b5f0fb5c228a53fb925404"><span class="id" title="notation">⊢</span></a>} (<span class="id" title="var">a</span> : <a class="idref" href="TypeTheory.Instances.Presheaves.html#d44f383ce45b5283439ea630afb544d5"><span class="id" title="variable">Δ</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#3323350bec9275f43096d779e7c0521a"><span class="id" title="notation">⊢</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#A"><span class="id" title="variable">A</span></a><a class="idref" href="TypeTheory.Instances.Presheaves.html#d6195e35b0ff1ca2b0aa4c6f39013ba9"><span class="id" title="notation">⦃</span></a><a class="idref" href="TypeTheory.Instances.Presheaves.html#3122c41ebe889f745cb9bbe1c92165c3"><span class="id" title="variable">σ</span></a><a class="idref" href="TypeTheory.Instances.Presheaves.html#d6195e35b0ff1ca2b0aa4c6f39013ba9"><span class="id" title="notation">⦄</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="TypeTheory.Instances.Presheaves.html#d6195e35b0ff1ca2b0aa4c6f39013ba9"><span class="id" title="notation">(</span></a><a class="idref" href="TypeTheory.Instances.Presheaves.html#A"><span class="id" title="variable">A</span></a><a class="idref" href="TypeTheory.Instances.Presheaves.html#d6195e35b0ff1ca2b0aa4c6f39013ba9"><span class="id" title="notation">⦃</span></a><a class="idref" href="TypeTheory.Instances.Presheaves.html#presheaves.p"><span class="id" title="variable">p</span></a><a class="idref" href="TypeTheory.Instances.Presheaves.html#d6195e35b0ff1ca2b0aa4c6f39013ba9"><span class="id" title="notation">⦄)⦃</span></a><a class="idref" href="TypeTheory.Instances.Presheaves.html#subst_pair"><span class="id" title="definition">subst_pair</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#3122c41ebe889f745cb9bbe1c92165c3"><span class="id" title="variable">σ</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#a"><span class="id" title="variable">a</span></a><a class="idref" href="TypeTheory.Instances.Presheaves.html#d6195e35b0ff1ca2b0aa4c6f39013ba9"><span class="id" title="notation">⦄</span></a> <span class="id" title="notation">=</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#A"><span class="id" title="variable">A</span></a><a class="idref" href="TypeTheory.Instances.Presheaves.html#d6195e35b0ff1ca2b0aa4c6f39013ba9"><span class="id" title="notation">⦃</span></a><a class="idref" href="TypeTheory.Instances.Presheaves.html#3122c41ebe889f745cb9bbe1c92165c3"><span class="id" title="variable">σ</span></a><a class="idref" href="TypeTheory.Instances.Presheaves.html#d6195e35b0ff1ca2b0aa4c6f39013ba9"><span class="id" title="notation">⦄</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">apply</span> (<span class="id" title="lemma">functor_eq</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="lemma">has_homsets_HSET</span>).<br/>
<span class="id" title="var">use</span> <span class="id" title="lemma">functor_data_eq</span>.<br/>
- <span class="id" title="tactic">intros</span> <span class="id" title="var">c</span>; <span class="id" title="tactic">apply</span> <span class="id" title="abbreviation">idpath</span>.<br/>
- <span class="id" title="tactic">intros</span> [<span class="id" title="var">a1</span> <span class="id" title="var">a2</span>] [<span class="id" title="var">b1</span> <span class="id" title="var">b2</span>] <span class="id" title="var">f</span>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <span class="id" title="definition">maponpaths</span>, <span class="id" title="lemma">subtypeEquality</span>; [<span class="id" title="tactic">intros</span> <span class="id" title="var">x</span>; <span class="id" title="tactic">apply</span> <span class="id" title="definition">setproperty</span>|].<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>

<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="base_paths_subst_type_pair_p"><span class="id" title="lemma">base_paths_subst_type_pair_p</span></a> {<span class="id" title="var">Γ</span> <span class="id" title="var">Δ</span> : <span class="id" title="notation">PreShv</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#presheaves.C"><span class="id" title="variable">C</span></a>} (σ : <a class="idref" href="TypeTheory.Instances.Presheaves.html#d44f383ce45b5283439ea630afb544d5"><span class="id" title="variable">Δ</span></a> <span class="id" title="notation">--&gt;</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a>) {<span class="id" title="var">A</span> : <a class="idref" href="TypeTheory.Instances.Presheaves.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#7a56e58de4b5f0fb5c228a53fb925404"><span class="id" title="notation">⊢</span></a>} (<span class="id" title="var">a</span> : <a class="idref" href="TypeTheory.Instances.Presheaves.html#d44f383ce45b5283439ea630afb544d5"><span class="id" title="variable">Δ</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#3323350bec9275f43096d779e7c0521a"><span class="id" title="notation">⊢</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#A"><span class="id" title="variable">A</span></a><a class="idref" href="TypeTheory.Instances.Presheaves.html#d6195e35b0ff1ca2b0aa4c6f39013ba9"><span class="id" title="notation">⦃</span></a><a class="idref" href="TypeTheory.Instances.Presheaves.html#3122c41ebe889f745cb9bbe1c92165c3"><span class="id" title="variable">σ</span></a><a class="idref" href="TypeTheory.Instances.Presheaves.html#d6195e35b0ff1ca2b0aa4c6f39013ba9"><span class="id" title="notation">⦄</span></a>) :<br/>
&nbsp;&nbsp;<span class="id" title="lemma">base_paths</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="lemma">base_paths</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<a class="idref" href="TypeTheory.Instances.Presheaves.html#subst_type_pair_p"><span class="id" title="lemma">subst_type_pair_p</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#3122c41ebe889f745cb9bbe1c92165c3"><span class="id" title="variable">σ</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#a"><span class="id" title="variable">a</span></a>)) <span class="id" title="notation">=</span><br/>
&nbsp;&nbsp;<span class="id" title="definition">funextsec</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="notation">λ</span> <span class="id" title="var">c</span><span class="id" title="notation">,</span> <span class="id" title="abbreviation">idpath</span> <span class="id" title="var">_</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">unfold</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#subst_type_pair_p"><span class="id" title="lemma">subst_type_pair_p</span></a>, <span class="id" title="lemma">functor_eq</span>, <span class="id" title="lemma">functor_data_eq</span>.<br/>
<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> !<span class="id" title="lemma">base_total2_paths</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
q(σ,a) = a 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a name="subst_pair_q"><span class="id" title="lemma">subst_pair_q</span></a> {<span class="id" title="var">Γ</span> <span class="id" title="var">Δ</span> : <span class="id" title="notation">PreShv</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#presheaves.C"><span class="id" title="variable">C</span></a>} (σ : <a class="idref" href="TypeTheory.Instances.Presheaves.html#d44f383ce45b5283439ea630afb544d5"><span class="id" title="variable">Δ</span></a> <span class="id" title="notation">--&gt;</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a>) {<span class="id" title="var">A</span> : <a class="idref" href="TypeTheory.Instances.Presheaves.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#7a56e58de4b5f0fb5c228a53fb925404"><span class="id" title="notation">⊢</span></a>} (<span class="id" title="var">a</span> : <a class="idref" href="TypeTheory.Instances.Presheaves.html#d44f383ce45b5283439ea630afb544d5"><span class="id" title="variable">Δ</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#3323350bec9275f43096d779e7c0521a"><span class="id" title="notation">⊢</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#A"><span class="id" title="variable">A</span></a><a class="idref" href="TypeTheory.Instances.Presheaves.html#d6195e35b0ff1ca2b0aa4c6f39013ba9"><span class="id" title="notation">⦃</span></a><a class="idref" href="TypeTheory.Instances.Presheaves.html#3122c41ebe889f745cb9bbe1c92165c3"><span class="id" title="variable">σ</span></a><a class="idref" href="TypeTheory.Instances.Presheaves.html#d6195e35b0ff1ca2b0aa4c6f39013ba9"><span class="id" title="notation">⦄</span></a>) :<br/>
&nbsp;&nbsp;<span class="id" title="definition">transportf</span> (<span class="id" title="notation">λ</span> <span class="id" title="var">x</span><span class="id" title="notation">,</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#d44f383ce45b5283439ea630afb544d5"><span class="id" title="variable">Δ</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#3323350bec9275f43096d779e7c0521a"><span class="id" title="notation">⊢</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#x"><span class="id" title="variable">x</span></a>) (<a class="idref" href="TypeTheory.Instances.Presheaves.html#subst_type_pair_p"><span class="id" title="lemma">subst_type_pair_p</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#3122c41ebe889f745cb9bbe1c92165c3"><span class="id" title="variable">σ</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#a"><span class="id" title="variable">a</span></a>) (<a class="idref" href="TypeTheory.Instances.Presheaves.html#subst_term"><span class="id" title="definition">subst_term</span></a> (<a class="idref" href="TypeTheory.Instances.Presheaves.html#subst_pair"><span class="id" title="definition">subst_pair</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#3122c41ebe889f745cb9bbe1c92165c3"><span class="id" title="variable">σ</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#a"><span class="id" title="variable">a</span></a>) <a class="idref" href="TypeTheory.Instances.Presheaves.html#presheaves.q"><span class="id" title="variable">q</span></a>) <span class="id" title="notation">=</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#a"><span class="id" title="variable">a</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">apply</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#TermIn_eq"><span class="id" title="lemma">TermIn_eq</span></a>.<br/>
<span class="id" title="var">etrans</span>; [<span class="id" title="var">use</span> <a class="idref" href="TypeTheory.Auxiliary.Auxiliary.html#pr1_transportf"><span class="id" title="lemma">pr1_transportf</span></a>|].<br/>
<span class="id" title="tactic">apply</span> <span class="id" title="definition">funextsec</span>; <span class="id" title="tactic">intro</span> <span class="id" title="var">I</span>; <span class="id" title="tactic">apply</span> <span class="id" title="definition">funextsec</span>; <span class="id" title="tactic">intro</span> ρ.<br/>
<span class="id" title="tactic">rewrite</span> !<a class="idref" href="TypeTheory.Auxiliary.Auxiliary.html#transportf_forall"><span class="id" title="lemma">transportf_forall</span></a>, <a class="idref" href="TypeTheory.Instances.Presheaves.html#transportf_TypeIn"><span class="id" title="lemma">transportf_TypeIn</span></a>.<br/>
<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> (<a class="idref" href="TypeTheory.Instances.Presheaves.html#base_paths_subst_type_pair_p"><span class="id" title="lemma">base_paths_subst_type_pair_p</span></a> σ <span class="id" title="var">a</span>), <span class="id" title="lemma">toforallpaths_funextsec</span>, <span class="id" title="definition">idpath_transportf</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
σ2 · (σ1,a) = (σ2 · σ1,a σ2) 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a name="subst_pair_subst"><span class="id" title="lemma">subst_pair_subst</span></a> {<span class="id" title="var">Γ</span> <span class="id" title="var">Δ</span> <span class="id" title="var">Θ</span> : <span class="id" title="notation">PreShv</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#presheaves.C"><span class="id" title="variable">C</span></a>} (σ1 : <a class="idref" href="TypeTheory.Instances.Presheaves.html#d44f383ce45b5283439ea630afb544d5"><span class="id" title="variable">Δ</span></a> <span class="id" title="notation">--&gt;</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a>) (σ2 : <a class="idref" href="TypeTheory.Instances.Presheaves.html#6e339d25b4e8063149b40e48a727392c"><span class="id" title="variable">Θ</span></a> <span class="id" title="notation">--&gt;</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#d44f383ce45b5283439ea630afb544d5"><span class="id" title="variable">Δ</span></a>)<br/>
&nbsp;&nbsp;{<span class="id" title="var">A</span> : <a class="idref" href="TypeTheory.Instances.Presheaves.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#7a56e58de4b5f0fb5c228a53fb925404"><span class="id" title="notation">⊢</span></a>} (<span class="id" title="var">a</span> : <a class="idref" href="TypeTheory.Instances.Presheaves.html#d44f383ce45b5283439ea630afb544d5"><span class="id" title="variable">Δ</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#3323350bec9275f43096d779e7c0521a"><span class="id" title="notation">⊢</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#A"><span class="id" title="variable">A</span></a><a class="idref" href="TypeTheory.Instances.Presheaves.html#d6195e35b0ff1ca2b0aa4c6f39013ba9"><span class="id" title="notation">⦃</span></a><a class="idref" href="TypeTheory.Instances.Presheaves.html#1cc6be414ab52727f77057b4b030dde0"><span class="id" title="variable">σ1</span></a><a class="idref" href="TypeTheory.Instances.Presheaves.html#d6195e35b0ff1ca2b0aa4c6f39013ba9"><span class="id" title="notation">⦄</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="TypeTheory.Instances.Presheaves.html#a4d9266a5be6c0504292c8910a50c288"><span class="id" title="variable">σ2</span></a> <span class="id" title="notation">·</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#subst_pair"><span class="id" title="definition">subst_pair</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#1cc6be414ab52727f77057b4b030dde0"><span class="id" title="variable">σ1</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#a"><span class="id" title="variable">a</span></a> <span class="id" title="notation">=</span><br/>
&nbsp;&nbsp;<a class="idref" href="TypeTheory.Instances.Presheaves.html#subst_pair"><span class="id" title="definition">subst_pair</span></a> (<a class="idref" href="TypeTheory.Instances.Presheaves.html#a4d9266a5be6c0504292c8910a50c288"><span class="id" title="variable">σ2</span></a> <span class="id" title="notation">·</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#1cc6be414ab52727f77057b4b030dde0"><span class="id" title="variable">σ1</span></a>) (<span class="id" title="definition">transportb</span> (<span class="id" title="notation">λ</span> <span class="id" title="var">x</span> : <a class="idref" href="TypeTheory.Instances.Presheaves.html#6e339d25b4e8063149b40e48a727392c"><span class="id" title="variable">Θ</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#7a56e58de4b5f0fb5c228a53fb925404"><span class="id" title="notation">⊢</span></a><span class="id" title="notation">,</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#6e339d25b4e8063149b40e48a727392c"><span class="id" title="variable">Θ</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#3323350bec9275f43096d779e7c0521a"><span class="id" title="notation">⊢</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#x"><span class="id" title="variable">x</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="TypeTheory.Instances.Presheaves.html#subst_type_comp"><span class="id" title="lemma">subst_type_comp</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#a4d9266a5be6c0504292c8910a50c288"><span class="id" title="variable">σ2</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#1cc6be414ab52727f77057b4b030dde0"><span class="id" title="variable">σ1</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#A"><span class="id" title="variable">A</span></a>) (<a class="idref" href="TypeTheory.Instances.Presheaves.html#subst_term"><span class="id" title="definition">subst_term</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#a4d9266a5be6c0504292c8910a50c288"><span class="id" title="variable">σ2</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#a"><span class="id" title="variable">a</span></a>)).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">apply</span> (<span class="id" title="lemma">nat_trans_eq</span> <span class="id" title="lemma">has_homsets_HSET</span>); <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">I</span>.<br/>
<span class="id" title="tactic">apply</span> <span class="id" title="definition">funextsec</span>; <span class="id" title="tactic">intro</span> ρ.<br/>
<span class="id" title="tactic">apply</span> <span class="id" title="definition">pair_path_in2</span>, <span class="id" title="definition">pathsinv0</span>; <span class="id" title="tactic">unfold</span> <span class="id" title="definition">transportb</span>.<br/>
<span class="id" title="tactic">set</span> (<span class="id" title="var">P</span> := <span class="id" title="notation">!</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#subst_type_comp"><span class="id" title="lemma">subst_type_comp</span></a> σ2 σ1 <span class="id" title="var">A</span>).<br/>
<span class="id" title="tactic">set</span> (<span class="id" title="var">B</span> := (<span class="id" title="notation">λ</span> <span class="id" title="var">a0</span> : <span class="id" title="var">Θ</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#7a56e58de4b5f0fb5c228a53fb925404"><span class="id" title="notation">⊢</span></a><span class="id" title="notation">,</span> <span class="id" title="notation">∏</span> <span class="id" title="notation">(</span><span class="id" title="var">I</span> : <a class="idref" href="TypeTheory.Instances.Presheaves.html#presheaves.C"><span class="id" title="variable">C</span></a>) (ρ : <span class="id" title="projection">pr1</span> (<span class="id" title="projection">pr1</span> <span class="id" title="var">Θ</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#I"><span class="id" title="variable">I</span></a>)<span class="id" title="notation">),</span> <span class="id" title="projection">pr1</span> (<span class="id" title="projection">pr1</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#a0"><span class="id" title="variable">a0</span></a> (<span class="id" title="definition">make_ob</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#I"><span class="id" title="variable">I</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#1af91fb19f8f622aa9ec8998986a6bf9"><span class="id" title="variable">ρ</span></a>)))).<br/>
<span class="id" title="var">etrans</span>; [<span class="id" title="tactic">apply</span> (<span class="id" title="definition">eqtohomot</span> (<span class="id" title="definition">eqtohomot</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="definition">maponpaths</span> <span class="id" title="projection">pr1</span> (@<span class="id" title="definition">transportf_total2</span> <span class="id" title="var">_</span> <span class="id" title="var">B</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">P</span> <span class="id" title="var">_</span>)) <span class="id" title="var">I</span>) ρ)|].<br/>
<span class="id" title="tactic">unfold</span> <span class="id" title="var">B</span>; <span class="id" title="tactic">simpl</span>.<br/>
<span class="id" title="tactic">rewrite</span> !<a class="idref" href="TypeTheory.Auxiliary.Auxiliary.html#transportf_forall"><span class="id" title="lemma">transportf_forall</span></a>.<br/>
<span class="id" title="tactic">apply</span> <span class="id" title="definition">pathsinv0</span>, (@<span class="id" title="lemma">transportf_transpose</span> <span class="id" title="var">_</span> (<span class="id" title="notation">λ</span> <span class="id" title="var">x</span> : <span class="id" title="var">Θ</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#7a56e58de4b5f0fb5c228a53fb925404"><span class="id" title="notation">⊢</span></a><span class="id" title="notation">,</span> <span class="id" title="projection">pr1</span> ((<span class="id" title="projection">pr1</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#x"><span class="id" title="variable">x</span></a>) (<span class="id" title="definition">make_ob</span> <span class="id" title="var">I</span> ρ))) <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">P</span>).<br/>
<span class="id" title="tactic">unfold</span> <span class="id" title="definition">transportb</span>, <span class="id" title="var">P</span>; <span class="id" title="tactic">rewrite</span> <span class="id" title="definition">pathsinv0inv0</span>.<br/>
<span class="id" title="var">etrans</span>; [<span class="id" title="tactic">apply</span> (<a class="idref" href="TypeTheory.Instances.Presheaves.html#transportf_TypeIn"><span class="id" title="lemma">transportf_TypeIn</span></a> <span class="id" title="var">I</span> ρ <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<a class="idref" href="TypeTheory.Instances.Presheaves.html#subst_type_comp"><span class="id" title="lemma">subst_type_comp</span></a> σ2 σ1 <span class="id" title="var">A</span>) <span class="id" title="var">_</span>)|].<br/>
<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#base_paths_subst_type_comp"><span class="id" title="lemma">base_paths_subst_type_comp</span></a>, <span class="id" title="lemma">toforallpaths_funextsec</span>, <span class="id" title="definition">idpath_transportf</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
(p,q) = 1 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a name="subst_pair_id"><span class="id" title="lemma">subst_pair_id</span></a> {<span class="id" title="var">Γ</span> : <span class="id" title="notation">PreShv</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#presheaves.C"><span class="id" title="variable">C</span></a>} {<span class="id" title="var">A</span> : <a class="idref" href="TypeTheory.Instances.Presheaves.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#7a56e58de4b5f0fb5c228a53fb925404"><span class="id" title="notation">⊢</span></a>} : <a class="idref" href="TypeTheory.Instances.Presheaves.html#subst_pair"><span class="id" title="definition">subst_pair</span></a> (<span class="id" title="var">A</span>:=<a class="idref" href="TypeTheory.Instances.Presheaves.html#A"><span class="id" title="variable">A</span></a>) <a class="idref" href="TypeTheory.Instances.Presheaves.html#presheaves.p"><span class="id" title="variable">p</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#presheaves.q"><span class="id" title="variable">q</span></a> <span class="id" title="notation">=</span> 1.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">apply</span> (<span class="id" title="lemma">nat_trans_eq</span> <span class="id" title="lemma">has_homsets_HSET</span>); <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">I</span>.<br/>
<span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <span class="id" title="definition">funextsec</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Γ ⊢ a : A can also be interpreted as sections s : Γ --&gt; Γ.A to p 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a name="TermInSection"><span class="id" title="definition">TermInSection</span></a> {<span class="id" title="var">Γ</span> : <span class="id" title="notation">PreShv</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#presheaves.C"><span class="id" title="variable">C</span></a>} (<span class="id" title="var">A</span> : <a class="idref" href="TypeTheory.Instances.Presheaves.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#7a56e58de4b5f0fb5c228a53fb925404"><span class="id" title="notation">⊢</span></a>) : <span class="id" title="definition">UU</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="notation">∑</span> <span class="id" title="var">s</span> : <a class="idref" href="TypeTheory.Instances.Presheaves.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a> <span class="id" title="notation">--&gt;</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#48605e99859816f6f7d4626269cf231b"><span class="id" title="notation">⋆</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#A"><span class="id" title="variable">A</span></a><span class="id" title="notation">,</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#s"><span class="id" title="variable">s</span></a> <span class="id" title="notation">·</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#presheaves.p"><span class="id" title="variable">p</span></a> <span class="id" title="notation">=</span> 1.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="TermIn_to_TermInSection"><span class="id" title="lemma">TermIn_to_TermInSection</span></a> {<span class="id" title="var">Γ</span> : <span class="id" title="notation">PreShv</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#presheaves.C"><span class="id" title="variable">C</span></a>} (<span class="id" title="var">A</span> : <a class="idref" href="TypeTheory.Instances.Presheaves.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#7a56e58de4b5f0fb5c228a53fb925404"><span class="id" title="notation">⊢</span></a>) : <a class="idref" href="TypeTheory.Instances.Presheaves.html#TermIn"><span class="id" title="definition">TermIn</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#A"><span class="id" title="variable">A</span></a> <span class="id" title="notation">→</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#TermInSection"><span class="id" title="definition">TermInSection</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#A"><span class="id" title="variable">A</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">intros</span> <span class="id" title="var">a</span>.<br/>
<span class="id" title="var">mkpair</span>.<br/>
- <span class="id" title="tactic">apply</span> (<a class="idref" href="TypeTheory.Instances.Presheaves.html#term_to_subst"><span class="id" title="definition">term_to_subst</span></a> <span class="id" title="var">_</span> <span class="id" title="var">a</span>).<br/>
- <span class="id" title="tactic">abstract</span> (<span class="id" title="tactic">apply</span> (<span class="id" title="lemma">nat_trans_eq</span> <span class="id" title="lemma">has_homsets_HSET</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">intros</span> <span class="id" title="var">I</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">apply</span> <span class="id" title="definition">funextfun</span>).<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="TermInSection_to_TermIn"><span class="id" title="lemma">TermInSection_to_TermIn</span></a> {<span class="id" title="var">Γ</span> : <span class="id" title="notation">PreShv</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#presheaves.C"><span class="id" title="variable">C</span></a>} (<span class="id" title="var">A</span> : <a class="idref" href="TypeTheory.Instances.Presheaves.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#7a56e58de4b5f0fb5c228a53fb925404"><span class="id" title="notation">⊢</span></a>) : <a class="idref" href="TypeTheory.Instances.Presheaves.html#TermInSection"><span class="id" title="definition">TermInSection</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#A"><span class="id" title="variable">A</span></a> <span class="id" title="notation">→</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#TermIn"><span class="id" title="definition">TermIn</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#A"><span class="id" title="variable">A</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">intros</span> <span class="id" title="var">a</span>.<br/>
<span class="id" title="tactic">rewrite</span> &lt;-<a class="idref" href="TypeTheory.Instances.Presheaves.html#subst_type_id"><span class="id" title="lemma">subst_type_id</span></a>, &lt;- (<span class="id" title="projection">pr2</span> <span class="id" title="var">a</span>), <a class="idref" href="TypeTheory.Instances.Presheaves.html#subst_type_comp"><span class="id" title="lemma">subst_type_comp</span></a>.<br/>
<span class="id" title="tactic">exact</span> (<a class="idref" href="TypeTheory.Instances.Presheaves.html#subst_term"><span class="id" title="definition">subst_term</span></a> <span class="id" title="var">_</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#presheaves.q"><span class="id" title="variable">q</span></a>).<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>

<br/>
</div>

<div class="doc">
Various results for instantiating TypeCat  
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <a name="p_gen"><span class="id" title="definition">p_gen</span></a> {<span class="id" title="var">Γ</span> <span class="id" title="var">Δ</span> : <span class="id" title="notation">PreShv</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#presheaves.C"><span class="id" title="variable">C</span></a>} {<span class="id" title="var">A</span> : <a class="idref" href="TypeTheory.Instances.Presheaves.html#d44f383ce45b5283439ea630afb544d5"><span class="id" title="variable">Δ</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#7a56e58de4b5f0fb5c228a53fb925404"><span class="id" title="notation">⊢</span></a>} (σ : <a class="idref" href="TypeTheory.Instances.Presheaves.html#d44f383ce45b5283439ea630afb544d5"><span class="id" title="variable">Δ</span></a> <span class="id" title="notation">--&gt;</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a>) : <a class="idref" href="TypeTheory.Instances.Presheaves.html#d44f383ce45b5283439ea630afb544d5"><span class="id" title="variable">Δ</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#48605e99859816f6f7d4626269cf231b"><span class="id" title="notation">⋆</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#A"><span class="id" title="variable">A</span></a> <span class="id" title="notation">--&gt;</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="var">use</span> <span class="id" title="definition">mk_nat_trans</span>.<br/>
- <span class="id" title="tactic">intros</span> <span class="id" title="var">I</span> <span class="id" title="var">X</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="projection">pr1</span> σ <span class="id" title="var">_</span> (<span class="id" title="projection">pr1</span> <span class="id" title="var">X</span>)).<br/>
- <span class="id" title="tactic">intros</span> <span class="id" title="var">I</span> <span class="id" title="var">J</span> <span class="id" title="var">f</span>; <span class="id" title="tactic">apply</span> <span class="id" title="definition">funextsec</span>; <span class="id" title="tactic">intro</span> ρ.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="definition">eqtohomot</span> (<span class="id" title="definition">nat_trans_ax</span> σ <span class="id" title="var">I</span> <span class="id" title="var">J</span> <span class="id" title="var">f</span>) (<span class="id" title="projection">pr1</span> ρ)).<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="q_gen"><span class="id" title="definition">q_gen</span></a> {<span class="id" title="var">Γ</span> <span class="id" title="var">Δ</span> : <span class="id" title="notation">PreShv</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#presheaves.C"><span class="id" title="variable">C</span></a>} {<span class="id" title="var">A</span> : <a class="idref" href="TypeTheory.Instances.Presheaves.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#7a56e58de4b5f0fb5c228a53fb925404"><span class="id" title="notation">⊢</span></a>} (σ : <a class="idref" href="TypeTheory.Instances.Presheaves.html#d44f383ce45b5283439ea630afb544d5"><span class="id" title="variable">Δ</span></a> <span class="id" title="notation">--&gt;</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a>) : <a class="idref" href="TypeTheory.Instances.Presheaves.html#3323350bec9275f43096d779e7c0521a"><span class="id" title="notation">(</span></a><a class="idref" href="TypeTheory.Instances.Presheaves.html#d44f383ce45b5283439ea630afb544d5"><span class="id" title="variable">Δ</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#48605e99859816f6f7d4626269cf231b"><span class="id" title="notation">⋆</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#48605e99859816f6f7d4626269cf231b"><span class="id" title="notation">(</span></a><a class="idref" href="TypeTheory.Instances.Presheaves.html#A"><span class="id" title="variable">A</span></a><a class="idref" href="TypeTheory.Instances.Presheaves.html#d6195e35b0ff1ca2b0aa4c6f39013ba9"><span class="id" title="notation">⦃</span></a><a class="idref" href="TypeTheory.Instances.Presheaves.html#3122c41ebe889f745cb9bbe1c92165c3"><span class="id" title="variable">σ</span></a><a class="idref" href="TypeTheory.Instances.Presheaves.html#d6195e35b0ff1ca2b0aa4c6f39013ba9"><span class="id" title="notation">⦄</span></a><a class="idref" href="TypeTheory.Instances.Presheaves.html#48605e99859816f6f7d4626269cf231b"><span class="id" title="notation">)</span></a><a class="idref" href="TypeTheory.Instances.Presheaves.html#3323350bec9275f43096d779e7c0521a"><span class="id" title="notation">)</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#3323350bec9275f43096d779e7c0521a"><span class="id" title="notation">⊢</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#A"><span class="id" title="variable">A</span></a><a class="idref" href="TypeTheory.Instances.Presheaves.html#d6195e35b0ff1ca2b0aa4c6f39013ba9"><span class="id" title="notation">⦃</span></a><a class="idref" href="TypeTheory.Instances.Presheaves.html#p_gen"><span class="id" title="definition">p_gen</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#3122c41ebe889f745cb9bbe1c92165c3"><span class="id" title="variable">σ</span></a><a class="idref" href="TypeTheory.Instances.Presheaves.html#d6195e35b0ff1ca2b0aa4c6f39013ba9"><span class="id" title="notation">⦄</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="var">use</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#mkTermIn"><span class="id" title="definition">mkTermIn</span></a>.<br/>
- <span class="id" title="tactic">intros</span> <span class="id" title="var">I</span> ρ.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="projection">pr2</span> ρ).<br/>
- <span class="id" title="tactic">intros</span> <span class="id" title="var">I</span> <span class="id" title="var">J</span> <span class="id" title="var">f</span> ρ; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <span class="id" title="definition">map_on_two_paths</span>; [<span class="id" title="tactic">apply</span> <span class="id" title="lemma">cat_of_elems_mor_eq</span>|].<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="q_gen_mor"><span class="id" title="definition">q_gen_mor</span></a> {<span class="id" title="var">Γ</span> <span class="id" title="var">Δ</span> : <span class="id" title="notation">PreShv</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#presheaves.C"><span class="id" title="variable">C</span></a>} (<span class="id" title="var">A</span> : <a class="idref" href="TypeTheory.Instances.Presheaves.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#7a56e58de4b5f0fb5c228a53fb925404"><span class="id" title="notation">⊢</span></a>) (σ : <a class="idref" href="TypeTheory.Instances.Presheaves.html#d44f383ce45b5283439ea630afb544d5"><span class="id" title="variable">Δ</span></a> <span class="id" title="notation">--&gt;</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a>) : <a class="idref" href="TypeTheory.Instances.Presheaves.html#d44f383ce45b5283439ea630afb544d5"><span class="id" title="variable">Δ</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#48605e99859816f6f7d4626269cf231b"><span class="id" title="notation">⋆</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#48605e99859816f6f7d4626269cf231b"><span class="id" title="notation">(</span></a><a class="idref" href="TypeTheory.Instances.Presheaves.html#A"><span class="id" title="variable">A</span></a><a class="idref" href="TypeTheory.Instances.Presheaves.html#d6195e35b0ff1ca2b0aa4c6f39013ba9"><span class="id" title="notation">⦃</span></a><a class="idref" href="TypeTheory.Instances.Presheaves.html#3122c41ebe889f745cb9bbe1c92165c3"><span class="id" title="variable">σ</span></a><a class="idref" href="TypeTheory.Instances.Presheaves.html#d6195e35b0ff1ca2b0aa4c6f39013ba9"><span class="id" title="notation">⦄</span></a><a class="idref" href="TypeTheory.Instances.Presheaves.html#48605e99859816f6f7d4626269cf231b"><span class="id" title="notation">)</span></a> <span class="id" title="notation">--&gt;</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#48605e99859816f6f7d4626269cf231b"><span class="id" title="notation">⋆</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#A"><span class="id" title="variable">A</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="TypeTheory.Instances.Presheaves.html#subst_pair"><span class="id" title="definition">subst_pair</span></a> (<a class="idref" href="TypeTheory.Instances.Presheaves.html#p_gen"><span class="id" title="definition">p_gen</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#3122c41ebe889f745cb9bbe1c92165c3"><span class="id" title="variable">σ</span></a>) (<a class="idref" href="TypeTheory.Instances.Presheaves.html#q_gen"><span class="id" title="definition">q_gen</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#3122c41ebe889f745cb9bbe1c92165c3"><span class="id" title="variable">σ</span></a>).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="q_gen_mor_p"><span class="id" title="lemma">q_gen_mor_p</span></a> {<span class="id" title="var">Γ</span> <span class="id" title="var">Δ</span> : <span class="id" title="notation">PreShv</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#presheaves.C"><span class="id" title="variable">C</span></a>} (<span class="id" title="var">A</span> : <a class="idref" href="TypeTheory.Instances.Presheaves.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#7a56e58de4b5f0fb5c228a53fb925404"><span class="id" title="notation">⊢</span></a>) (σ : <a class="idref" href="TypeTheory.Instances.Presheaves.html#d44f383ce45b5283439ea630afb544d5"><span class="id" title="variable">Δ</span></a> <span class="id" title="notation">--&gt;</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="TypeTheory.Instances.Presheaves.html#q_gen_mor"><span class="id" title="definition">q_gen_mor</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#3122c41ebe889f745cb9bbe1c92165c3"><span class="id" title="variable">σ</span></a> <span class="id" title="notation">·</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#presheaves.p"><span class="id" title="variable">p</span></a> <span class="id" title="notation">=</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#presheaves.p"><span class="id" title="variable">p</span></a> <span class="id" title="notation">·</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#3122c41ebe889f745cb9bbe1c92165c3"><span class="id" title="variable">σ</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">apply</span> (<span class="id" title="lemma">nat_trans_eq</span> <span class="id" title="lemma">has_homsets_HSET</span>); <span class="id" title="tactic">intro</span> <span class="id" title="var">I</span>.<br/>
<span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <span class="id" title="definition">funextsec</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="isPullback_q_gen_mor"><span class="id" title="lemma">isPullback_q_gen_mor</span></a> {<span class="id" title="var">Γ</span> <span class="id" title="var">Δ</span> : <span class="id" title="notation">PreShv</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#presheaves.C"><span class="id" title="variable">C</span></a>} (<span class="id" title="var">A</span> : <a class="idref" href="TypeTheory.Instances.Presheaves.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#7a56e58de4b5f0fb5c228a53fb925404"><span class="id" title="notation">⊢</span></a>) (σ : <a class="idref" href="TypeTheory.Instances.Presheaves.html#d44f383ce45b5283439ea630afb544d5"><span class="id" title="variable">Δ</span></a> <span class="id" title="notation">--&gt;</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a>) :<br/>
&nbsp;&nbsp;<span class="id" title="definition">isPullback</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<a class="idref" href="TypeTheory.Instances.Presheaves.html#q_gen_mor_p"><span class="id" title="lemma">q_gen_mor_p</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#3122c41ebe889f745cb9bbe1c92165c3"><span class="id" title="variable">σ</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="var">use</span> <span class="id" title="lemma">pb_if_pointwise_pb</span>.<br/>
<span class="id" title="tactic">intros</span> <span class="id" title="var">I</span>.<br/>
<span class="id" title="var">use</span> <a class="idref" href="TypeTheory.Auxiliary.Auxiliary.html#isPullback_HSET"><span class="id" title="lemma">isPullback_HSET</span></a>.<br/>
<span class="id" title="tactic">intros</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">eq</span>.<br/>
<span class="id" title="var">use</span> <span class="id" title="lemma">unique_exists</span>.<br/>
- <span class="id" title="tactic">exists</span> <span class="id" title="var">b</span>; <span class="id" title="var">cbn</span> <span class="id" title="keyword">in</span> *.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="definition">transportf</span> (<span class="id" title="notation">λ</span> <span class="id" title="var">x</span><span class="id" title="notation">,</span> <span class="id" title="projection">pr1</span> (<span class="id" title="var">A</span> (<span class="id" title="definition">make_ob</span> <span class="id" title="var">I</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#x"><span class="id" title="variable">x</span></a>))) <span class="id" title="var">eq</span> (<span class="id" title="projection">pr2</span> <span class="id" title="var">a</span>)).<br/>
- <span class="id" title="tactic">split</span>; <span class="id" title="tactic">trivial</span>; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">use</span> <span class="id" title="lemma">total2_paths_f</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> (<span class="id" title="notation">!</span><span class="id" title="var">eq</span>).<br/>
&nbsp;&nbsp;+ <span class="id" title="var">now</span> <span class="id" title="var">cbn</span>; <span class="id" title="tactic">rewrite</span> <span class="id" title="definition">transport_f_f</span>, <span class="id" title="definition">pathsinv0r</span>, <span class="id" title="definition">idpath_transportf</span>.<br/>
- <span class="id" title="tactic">intros</span> ρ.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <span class="id" title="definition">isapropdirprod</span>; <span class="id" title="tactic">apply</span> <span class="id" title="definition">setproperty</span>.<br/>
- <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">intros</span> [<span class="id" title="var">x1</span> <span class="id" title="var">x2</span>] [<span class="id" title="var">h1</span> <span class="id" title="var">h2</span>].<br/>
&nbsp;&nbsp;<span class="id" title="var">use</span> <span class="id" title="lemma">total2_paths_f</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">h2</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">induction</span> <span class="id" title="var">h2</span>; <span class="id" title="tactic">induction</span> <span class="id" title="var">h1</span>; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">H</span> : <span class="id" title="var">eq</span> <span class="id" title="notation">=</span> <span class="id" title="abbreviation">idpath</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> <span class="id" title="definition">setproperty</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span>, !<span class="id" title="definition">idpath_transportf</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#presheaves"><span class="id" title="section">presheaves</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab245"></a><h1 class="section">Presheaf categories are type categories</h1>

</div>
<div class="code">
<span class="id" title="keyword">Section</span> <a name="TypeCat"><span class="id" title="section">TypeCat</span></a>.<br/>

<br/>
<span class="id" title="keyword">Context</span> (<span class="id" title="var">C</span> : <span class="id" title="definition">precategory</span>) (<span class="id" title="var">hsC</span> : <span class="id" title="definition">has_homsets</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#C"><span class="id" title="variable">C</span></a>).<br/>

<br/>
<span class="id" title="keyword">Local</span> <span class="id" title="keyword">Notation</span> "Γ ⊢" := (<span class="id" title="notation">PreShv</span> <span class="id" title="notation">(</span><span class="id" title="notation">∫</span> <span class="id" title="var">Γ</span><span class="id" title="notation">)</span>) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 50).<br/>
<span class="id" title="keyword">Local</span> <span class="id" title="keyword">Notation</span> "Γ ⊢ A" := (@<a class="idref" href="TypeTheory.Instances.Presheaves.html#TermIn"><span class="id" title="definition">TermIn</span></a> <span class="id" title="var">_</span> <span class="id" title="var">Γ</span> <span class="id" title="var">A</span>) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 50).<br/>
<span class="id" title="keyword">Local</span> <span class="id" title="keyword">Notation</span> "A ⦃ s ⦄" := (<a class="idref" href="TypeTheory.Instances.Presheaves.html#subst_type"><span class="id" title="definition">subst_type</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#TypeCat.hsC"><span class="id" title="variable">hsC</span></a> <span class="id" title="var">A</span> <span class="id" title="var">s</span>) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 40, <span class="id" title="var">format</span> "A ⦃ s ⦄").<br/>
<span class="id" title="keyword">Local</span> <span class="id" title="keyword">Notation</span> "Γ ⋆ A" := (@<a class="idref" href="TypeTheory.Instances.Presheaves.html#ctx_ext"><span class="id" title="definition">ctx_ext</span></a> <span class="id" title="var">_</span> <span class="id" title="var">Γ</span> <span class="id" title="var">A</span>) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 30).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="PreShv_TypeCat"><span class="id" title="definition">PreShv_TypeCat</span></a> : <a class="idref" href="TypeTheory.ALV1.TypeCat.html#typecat_structure"><span class="id" title="definition">typecat_structure</span></a> (<span class="id" title="notation">PreShv</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#TypeCat.C"><span class="id" title="variable">C</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="var">mkpair</span>.<br/>
- <span class="id" title="tactic">exists</span> (<span class="id" title="notation">λ</span> <span class="id" title="var">Γ</span><span class="id" title="notation">,</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#5138d061825e70e83f3875dd4ee798c9"><span class="id" title="notation">⊢</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<span class="id" title="notation">λ</span> <span class="id" title="var">Γ</span> <span class="id" title="var">A</span><span class="id" title="notation">,</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#0030b41fab2ca35698b381e0b2b113fb"><span class="id" title="notation">⋆</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#A"><span class="id" title="variable">A</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Γ</span> <span class="id" title="var">A</span> <span class="id" title="var">Δ</span> σ.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exact</span> (<span class="id" title="var">A</span><a class="idref" href="TypeTheory.Instances.Presheaves.html#932058b827dc91351c872706bc2eab80"><span class="id" title="notation">⦃</span></a>σ<a class="idref" href="TypeTheory.Instances.Presheaves.html#932058b827dc91351c872706bc2eab80"><span class="id" title="notation">⦄</span></a>).<br/>
- <span class="id" title="tactic">exists</span> (<span class="id" title="notation">λ</span> <span class="id" title="var">Γ</span> <span class="id" title="var">A</span><span class="id" title="notation">,</span> @<a class="idref" href="TypeTheory.Instances.Presheaves.html#ctx_proj"><span class="id" title="definition">ctx_proj</span></a> <span class="id" title="var">_</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#A"><span class="id" title="variable">A</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<span class="id" title="notation">λ</span> <span class="id" title="var">Γ</span> <span class="id" title="var">A</span> <span class="id" title="var">Δ</span> σ<span class="id" title="notation">,</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#q_gen_mor"><span class="id" title="definition">q_gen_mor</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#TypeCat.hsC"><span class="id" title="variable">hsC</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#3122c41ebe889f745cb9bbe1c92165c3"><span class="id" title="variable">σ</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<span class="id" title="notation">λ</span> <span class="id" title="var">Γ</span> <span class="id" title="var">A</span> <span class="id" title="var">Δ</span> σ<span class="id" title="notation">,</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#q_gen_mor_p"><span class="id" title="lemma">q_gen_mor_p</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#TypeCat.hsC"><span class="id" title="variable">hsC</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#3122c41ebe889f745cb9bbe1c92165c3"><span class="id" title="variable">σ</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Γ</span> <span class="id" title="var">A</span> <span class="id" title="var">Δ</span> σ.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">is_symmetric_isPullback</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> (<span class="id" title="lemma">functor_category_has_homsets</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#TypeCat.C"><span class="id" title="variable">C</span></a><span class="id" title="notation">^</span><span class="id" title="notation">op</span>).<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">exact</span> (<a class="idref" href="TypeTheory.Instances.Presheaves.html#isPullback_q_gen_mor"><span class="id" title="lemma">isPullback_q_gen_mor</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#TypeCat.hsC"><span class="id" title="variable">hsC</span></a> <span class="id" title="var">A</span> σ).<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#TypeCat"><span class="id" title="section">TypeCat</span></a>.<br/>

<br/>
</div>

<div class="doc">
Failed attempt to instantiate CwF structure 
</div>
<div class="code">
<span class="id" title="keyword">Section</span> <a name="CwF"><span class="id" title="section">CwF</span></a>.<br/>

<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="TypeTheory.OtherDefs.CwF_Pitts.html#"><span class="id" title="library">TypeTheory.OtherDefs.CwF_Pitts</span></a>.<br/>

<br/>
<span class="id" title="keyword">Context</span> (<span class="id" title="var">C</span> : <span class="id" title="definition">precategory</span>) (<span class="id" title="var">hsC</span> : <span class="id" title="definition">has_homsets</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#C"><span class="id" title="variable">C</span></a>).<br/>

<br/>
<span class="id" title="keyword">Local</span> <span class="id" title="keyword">Notation</span> "Γ ⊢" := (<span class="id" title="notation">PreShv</span> <span class="id" title="notation">(</span><span class="id" title="notation">∫</span> <span class="id" title="var">Γ</span><span class="id" title="notation">)</span>) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 50).<br/>
<span class="id" title="keyword">Local</span> <span class="id" title="keyword">Notation</span> "Γ ⊢ A" := (@<a class="idref" href="TypeTheory.Instances.Presheaves.html#TermIn"><span class="id" title="definition">TermIn</span></a> <span class="id" title="var">_</span> <span class="id" title="var">Γ</span> <span class="id" title="var">A</span>) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 50).<br/>
<span class="id" title="keyword">Local</span> <span class="id" title="keyword">Notation</span> "A ⦃ s ⦄" := (<a class="idref" href="TypeTheory.Instances.Presheaves.html#subst_type"><span class="id" title="definition">subst_type</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#CwF.hsC"><span class="id" title="variable">hsC</span></a> <span class="id" title="var">A</span> <span class="id" title="var">s</span>) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 40, <span class="id" title="var">format</span> "A ⦃ s ⦄").<br/>
<span class="id" title="keyword">Local</span> <span class="id" title="keyword">Notation</span> "Γ ⋆ A" := (@<a class="idref" href="TypeTheory.Instances.Presheaves.html#ctx_ext"><span class="id" title="definition">ctx_ext</span></a> <span class="id" title="var">_</span> <span class="id" title="var">Γ</span> <span class="id" title="var">A</span>) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 30).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="PreShv_tt_structure"><span class="id" title="definition">PreShv_tt_structure</span></a> : <a class="idref" href="TypeTheory.OtherDefs.CwF_Pitts.html#tt_structure"><span class="id" title="definition">tt_structure</span></a> (<span class="id" title="notation">PreShv</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#CwF.C"><span class="id" title="variable">C</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">exists</span> (<span class="id" title="notation">λ</span> <span class="id" title="var">Γ</span><span class="id" title="notation">,</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#1b004e48cd1f64e22d5c000cf0d7f047"><span class="id" title="variable">Γ</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#cfc0b96764930a3fe289c51456e5107a"><span class="id" title="notation">⊢</span></a>).<br/>
<span class="id" title="tactic">intros</span> <span class="id" title="var">Γ</span> <span class="id" title="var">A</span>.<br/>
<span class="id" title="tactic">exact</span> (<span class="id" title="var">Γ</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#90583ffabddaa62b2725ff9f313d9956"><span class="id" title="notation">⊢</span></a> <span class="id" title="var">A</span>).<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="PreShv_reindx_structure"><span class="id" title="lemma">PreShv_reindx_structure</span></a> : <a class="idref" href="TypeTheory.OtherDefs.CwF_Pitts.html#reindx_structure"><span class="id" title="definition">reindx_structure</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#PreShv_tt_structure"><span class="id" title="definition">PreShv_tt_structure</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="var">mkpair</span>.<br/>
- <span class="id" title="tactic">intros</span> <span class="id" title="var">Γ</span> <span class="id" title="var">Δ</span> <span class="id" title="var">A</span> σ.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exact</span> (<span class="id" title="var">A</span><a class="idref" href="TypeTheory.Instances.Presheaves.html#ffd16c806127ec63fa93c67e94507ad2"><span class="id" title="notation">⦃</span></a>σ<a class="idref" href="TypeTheory.Instances.Presheaves.html#ffd16c806127ec63fa93c67e94507ad2"><span class="id" title="notation">⦄</span></a>).<br/>
- <span class="id" title="tactic">intros</span> <span class="id" title="var">Γ</span> <span class="id" title="var">Δ</span> <span class="id" title="var">A</span> <span class="id" title="var">a</span> σ.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exact</span> (<a class="idref" href="TypeTheory.Instances.Presheaves.html#subst_term"><span class="id" title="definition">subst_term</span></a> <span class="id" title="var">_</span> σ <span class="id" title="var">a</span>).<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="PreShv_tt_reindx_type_struct"><span class="id" title="definition">PreShv_tt_reindx_type_struct</span></a> : <a class="idref" href="TypeTheory.OtherDefs.CwF_Pitts.html#tt_reindx_type_struct"><span class="id" title="definition">tt_reindx_type_struct</span></a> (<span class="id" title="notation">PreShv</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#CwF.C"><span class="id" title="variable">C</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="var">mkpair</span>.<br/>
+ <span class="id" title="tactic">exists</span> (<a class="idref" href="TypeTheory.Instances.Presheaves.html#PreShv_tt_structure"><span class="id" title="definition">PreShv_tt_structure</span></a><span class="id" title="notation">,,</span><a class="idref" href="TypeTheory.Instances.Presheaves.html#PreShv_reindx_structure"><span class="id" title="lemma">PreShv_reindx_structure</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Γ</span> <span class="id" title="var">A</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<span class="id" title="var">Γ</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#fd487383562afa293b5159686af4e15f"><span class="id" title="notation">⋆</span></a> <span class="id" title="var">A</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#ctx_proj"><span class="id" title="definition">ctx_proj</span></a>.<br/>
+ <span class="id" title="tactic">intros</span> <span class="id" title="var">Γ</span> <span class="id" title="var">A</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;* <span class="id" title="tactic">apply</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#ctx_last"><span class="id" title="definition">ctx_last</span></a>.<br/>
&nbsp;&nbsp;* <span class="id" title="tactic">intros</span> <span class="id" title="var">Δ</span> σ <span class="id" title="var">a</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> (<a class="idref" href="TypeTheory.Instances.Presheaves.html#subst_pair"><span class="id" title="definition">subst_pair</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#CwF.hsC"><span class="id" title="variable">hsC</span></a> σ <span class="id" title="var">a</span>).<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="PreShv_reindx_laws"><span class="id" title="lemma">PreShv_reindx_laws</span></a> : <a class="idref" href="TypeTheory.OtherDefs.CwF_Pitts.html#reindx_laws"><span class="id" title="definition">reindx_laws</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#PreShv_tt_reindx_type_struct"><span class="id" title="definition">PreShv_tt_reindx_type_struct</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="var">mkpair</span>.<br/>
- <span class="id" title="var">mkpair</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">intros</span> <span class="id" title="var">Γ</span> <span class="id" title="var">A</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#subst_type_id"><span class="id" title="lemma">subst_type_id</span></a>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">intros</span> <span class="id" title="var">Γ</span> <span class="id" title="var">Δ</span> <span class="id" title="var">Θ</span> σ1 σ2 <span class="id" title="var">A</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="TypeTheory.Instances.Presheaves.html#subst_type_comp"><span class="id" title="lemma">subst_type_comp</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#CwF.hsC"><span class="id" title="variable">hsC</span></a>).<br/>
- <span class="id" title="var">mkpair</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">intros</span> <span class="id" title="var">Γ</span> <span class="id" title="var">A</span> <span class="id" title="var">a</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="TypeTheory.Instances.Presheaves.html#subst_term_id"><span class="id" title="lemma">subst_term_id</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#CwF.hsC"><span class="id" title="variable">hsC</span></a> <span class="id" title="var">a</span>).<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">intros</span> <span class="id" title="var">Γ</span> <span class="id" title="var">Δ</span> <span class="id" title="var">Θ</span> σ1 σ2 <span class="id" title="var">A</span> <span class="id" title="var">a</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> (<a class="idref" href="TypeTheory.Instances.Presheaves.html#subst_term_comp"><span class="id" title="lemma">subst_term_comp</span></a> <a class="idref" href="TypeTheory.Instances.Presheaves.html#CwF.hsC"><span class="id" title="variable">hsC</span></a> σ2 σ1 <span class="id" title="var">a</span>).<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="TypeTheory.Instances.Presheaves.html#CwF"><span class="id" title="section">CwF</span></a>.<br/>
</div>
</div>

<div id="footer">
<hr/><a href="index.html">Index</a><hr/>This page has been generated by <a href="http://coq.inria.fr/">coqdoc</a>
</div>

</div>
{% endraw %}
